\chapter{Anexo II: Desarrollos complementarios}

\pagestyle{empty}

\newpage

\pagestyle{fancy}

\section{Proceso de tratamiento de efluentes}
\label{anexo:tratamientoDeEfluentes}

\subsection{Tratamiento preliminar}

El ingreso del efluente se da a través de una tubería que finaliza en una pileta de medición de caudal, la cual posee un medidor en V y un sensor de ultrasonido. Luego el líquido continúa hacia el tanque pulmón, no sin antes pasar por un tornillo drenador de residuos finos.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/tratamiento/caudal.jpg}
    \caption{Medición de caudal proveniente de la línea de MDF.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/tratamiento/tornillo.png}
    \caption{Tornillo drenador de residuos finos.}
\end{figure}

El efluente llega por gravedad a través de una tubería de ingreso, hasta una caja de hormigón que tiene amurado una chapa de acero inoxidable con forma de vertedero en V a 90° por donde desborda la corriente líquida. El efluente crudo rebosa por el vertedero atravesando un canasto totalmente perforado de acero inoxidable. Los orificios tienen un diámetro de $8 mm$ y su función es de retener sólidos.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/tratamiento/grilla.jpg}
    \caption{Canasto de acero inoxidable.}
\end{figure}

El filtro canasto se encuentra suspendido debajo del vertedero y posee un sistema de críquet para izamiento. De esta manera el operador procede a retirar los sólidos.

El efluente filtrado antes de llegar al tanque ecualizador pasa por una cámara desarenadora de 7 $m^{3}$, cuya función es actuar como sedimentador estático de las partículas que están contenidas en la corriente líquida.

A caudal de trabajo promedio de la planta, esto implica un tiempo de retención de 10 a 15 minutos, lo que permite separar arenas y pequeñas piedras provenientes de las purgas del chip wash.

A partir de aquí, el efluente pasa al tanque ecualizador cuya función es homogeneizar picos de caudal y concentración del efluente crudo. Está construido en hormigón armado con un volumen útil de 100 $m^{3}$ de capacidad. Para mantener homogeneizado el volumen del tanque pulmón e impedir la decantación de sólidos, se instaló una grilla construida en caño de acero inoxidable AISI 304 con 20 orificios de salida de 25 $mm$ de diámetro y repartidos en todo el fondo de la cuba.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.6]{src/imagenes/tratamiento/ecualizador.png}
    \caption{Ecualizador.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/tratamiento/fondoEcualizador.png}
    \caption{Grilla en el fondo de la cuba.}
\end{figure}

\subsection{Tratamiento primario}

La unidad de tratamiento físico-químico y sedimentación, tiene como fin efectuar una remoción gruesa de DBO5, DQO y sólidos en suspensión.

El sedimentador primario para el tratamiento físico-químico, está construido en hormigón armado, se ha diseñado y dimensionado para tratar un caudal de 15 $m^{3}$ por hora y picos de hasta 25 $m^{3}$ por hora.

El efluente crudo ingresa por una caja vertedero a 60°, para medición de caudales. Allí recibe la dosificación del policloruro de Aluminio (PAC) y posteriormente la dosis de hidróxido de sodio (soda cáustica). Luego ingresa a la primera cámara de reacción llamada flash-mix.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/tratamiento/sodaCaustica.jpg}
    \caption{Añadido de soda caustica.}
\end{figure}

El tipo, la concentración y la secuencia de las especies químicas a dosificar están relacionados con las características del efluente, y su adecuada dosificación optimiza la formación de los flóculos y la clarificación. El PH óptimo de trabajo es 6,4, y las dosis de los reactivos surgen en función de los estudios de jar test realizados oportunamente. Como su nombre lo indica, en esta cámara flash-mix se produce la mezcla homogénea entre el efluente crudo a tratar y los reactivos químicos. La cámara flash-mix tiene un tiempo de retención variable de acuerdo al caudal de efluente tratado. Está construida de hormigón armado con las siguientes dimensiones: $1.30m$ de largo, $1.30m$ de ancho, y unos $3,3m$ de profundidad, con un volumen útil de $5m^{3}$. Esta cámara está equipada con un agitador, donde existe la posibilidad de modificar las velocidades de rotación, de acuerdo al efluente a tratar.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/tratamiento/agitador.png}
    \caption{Zona de agitación.}
\end{figure}

Existe una segunda cámara, idéntica a la anterior, donde se dosifica el polímero. Ambas cámaras cuentan con un PHmetro indicador con dos puntos de alarma.

Luego de producirse en ambas cámaras los procesos de coagulación-floculación, el efluente con el flóculo desarrollado fluye por rebalse e ingresa a una cámara intermedia, luego por una cañería de 6 pulgadas de diámetro de acero inoxidable montada en la parte inferior de la cámara, pasa hacia la columna central del sedimentador de 8 m de diámetro, donde se separan los sólidos suspendidos.

El sedimentador se construyó en hormigón armado y está diseñado a caudal de trabajo, con una carga hidráulica conservadora, a razón de $0,5\frac{m{3}}{hr \cdot m^{2}}$. Posee un tirante líquido de $2,8m$ y un volumen de $140m^{3}$ de capacidad.

A los caudales promedio de trabajo de la planta, el tiempo de retención es de 10 horas aproximadamente, con este tiempo se logra reducir al mínimo el arrastre de sólidos suspendidos. Los mismos se recolectan en la parte superior mediante un barredor de superficie, así como los decantados son barridos por el barredor de medio puente de accionamiento.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/tratamiento/sedimentador.png}
    \caption{Sedimentador.}
\end{figure}

\subsection{Tratamiento de lodos}

\subsubsection{Espesamiento y deshidratación de lodos}

Los barros generados en el sedimentador, se purgan del sistema mediante válvula automática y se envían a un tanque de lodos de $10 m^{3}$ de capacidad, donde se someten a un proceso de acondicionamiento final y posterior deshidratación en el filtro prensa. La concentración lograda del lodo oscila entre $6\%$ al $8\%$.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/tratamiento/secador.png}
    \caption{Deshidratación de lodo.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/tratamiento/tanqueDeLodo.png}
    \caption{Tanque de lodos.}
\end{figure}

\subsubsection{Filtro Prensa}

La función del filtro prensa es deshidratar los barros provenientes del tratamiento físico-químico en forma de tortas compactas, reteniéndolas entre los marcos. El agua filtrada se colecta junto al rebose del decantador primario, en un foso colector de aguas claras desde donde son bombeadas al tratamiento biológico.

Consta de 50 placas móviles y 2 placas fijas de $1000mm \times 1000mm$. Las mismas tienen dos superficies filtrantes y las fijas solo una. Las placas móviles llevan un juego de telas dobles que cubren cada una de las superficies filtrantes y las placas fijas una tela simple que cubren sus únicas superficies filtrantes. El material de las telas es polipropileno. En total se generan 50 tortas. Cada torta tiene un volumen de 33 litros. El filtro se mantiene cerrado a una presión de $300bar$ mediante la central hidráulica.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/tratamiento/filtroPrensa.png}
    \caption{Filtro prensa.}
\end{figure}

\subsection{Tratamiento secundario}

\label{anexo:tratamientoSecundario}

Las aguas provenientes del tratamiento físico-químico y el filtrado proveniente de la deshidratación de lodo se recolectan en el foso de aguas claras. Estos líquidos contienen materia orgánica, en gran medida en forma soluble, la cual deberá ser eliminada en el tratamiento secundario de tipo biológico.

Para el tratamiento del agua residual se tiene una unidad de lodos activados AIS (Advent Integral System) provista por el grupo EIMCO/ADVENT de U.S.A. La planta se puso en marcha en julio del año 2000.

A diferencia de otros tipos de plantas de depuración biológica, el sistema AIS incorpora dentro de una misma unidad tres áreas: una pileta de aireación, una zona anóxica y el clarificador. Este sistema permite trabajar a una alta concentración de biomasa. Posee un volumen de trabajo útil de $1400m^{3}$ de capacidad. Con un tiempo de residencia en el reactor de 5-6 días.

Esta planta está diseñada para tratar un promedio diario de $12 \frac{m^{3}}{hora}$ de agua residual y es para reducir TSS, DBO, y DQO hasta niveles aceptables.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.8]{src/imagenes/tratamiento/biologico.png}
    \caption{Pileta de tratamiento biológico.}
\end{figure}

Para comprender este proceso definimos como lodos activados, a una mezcla de microorganismos específicos y agua residual a depurar, aireados en forma permanente, durante un cierto tiempo (aprox. 3 a 4 días). Luego mediante un proceso de sedimentación se separa el lodo del agua depurada.

Debido a que el agua a tratar contiene niveles de NTK (Nitrógeno Total Kejdall) algo elevados, la planta cuenta con una zona anóxica para la desnitrificación. Esta etapa permite mantener los niveles entrantes de NTK por debajo de los límites inhibidores y evita los problemas de estabilización dentro del clarificador, causados por no controlar la desnitrificación.

Desde el tratamiento primario, el agua residual ingresa en la porción anóxica de la unidad AIS. Esta zona se caracteriza por un bajo nivel de oxígeno disuelto. Mediante la bomba dosificadora se suministra fósforo como nutriente, para mejorar la actividad biológica. El agitador sumergido mantiene una agitación suave y constante, para impedir que el lodo activado sedimente en el fondo.

Desde la zona anóxica, el lodo activado, pasa por vaso comunicante a la sección de aireación. Es aquí donde los microorganismos específicos degradan la mayor parte de la materia orgánica, utilizándola como nutriente para realizar su ciclo de reproducción y crecimiento, y como consecuencia realizan una depuración biológica de agua residual que es nuestro objetivo.

El aire necesario para este proceso es vital, se incorpora mediante dos sopladores de aire tipo roots, y se distribuye mediante una grilla de difusión por burbujas gruesas sujeta al fondo de la cuba de aireación.

La concentración de biomasa en el sistema se mantiene entre 6000 - 8000 mg/l. Mediante la bomba de elevación de aire (air lift), el lodo activado asciende desde la zona de aireación e ingresa al canal DTF (desaireación, transición, floculación), en este canal se brindan condiciones (baja velocidad) para que el lodo activado pierda el aire disuelto. Mediante la bomba se dosifica una solución de polímero catiónico para ayudar a la floculación, que tendrá lugar, minutos después, dentro del clarificador.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/tratamiento/plantaDeTratamientoBiologico.png}
    \caption{Gráfica del proceso de lodos activados.}
\end{figure}

Parte del caudal del lodo activado que fluye por el canal DTF, ingresa al clarificador y el resto se recicla a la zona anóxica, diluyendo la corriente que ingresa desde el tratamiento primario. Estos caudales se regulan en forma manual, mediante la válvula tapón del clarificador y la válvula de compuerta de la zona anóxica.

La tubería de distribución del clarificador está especialmente diseñada para crear una velocidad descendente del lodo activado. Esta velocidad descendente inducida es una característica única patentada del diseño del AIS. El distribuidor es una tubería de acero inoxidable de gran diámetro con orificios en el fondo que tiene bocas sobre la parte superior de los orificios para dirigir el flujo descendente.

Desde la tubería de distribución del clarificador, el lodo es espesado en el fondo del cono y el efluente claro es recolectado por dos tuberías perforadas sumergidas en la parte superior del clarificador, de manera de recolectar solo el agua clarificada. Aquí se separa la biomasa del agua tratada. Es decir, recuperamos los microorganismos para que continúen depurando más agua residual.

El agua depurada es recolectada en una cuba de hormigón de $8m^{3}$ de capacidad. Las bombas centrífugas son las encargadas de bombear el agua tratada. Esta operación es automática, a través de boyas de control de nivel. El lodo activado concentrado en el fondo del clarificador cónico se recicla hacia la zona anóxica, mediante vasos comunicantes por orificios desde las zonas cónicas hacia la zona anóxica. La purga de fondo necesaria para mantener la concentración de biomasa del sistema en los niveles adecuados, se realiza a través de una tubería de 3 pulgadas con válvula automática temporizada y controlada a través de un PLC. El tiempo de apertura de la purga se fija mediante ensayos de laboratorio.

\subsubsection{Caracteristicas constructivas}

\begin{itemize}
    \item{\textbf{Zona de aireación:} Tanque de aireación de $16.61m$ de largo, $8.74m$ de ancho y $7.00m$ de alto. El nivel de trabajo del líquido es de $6m$. El volumen total de aireación provisto es de $960m^{3}$.}
    \item{\textbf{Clarificador integral:} Las paredes del clarificador tienen un ángulo de 60° y está fabricado en hormigón armado. El clarificador  integral tiene $6.81m$ de largo y $8.74m$ de ancho, con un área de superficie de $59.5m^{2}$. La velocidad de carga hidráulica es de $0.2\frac{m^{3}}{hr \cdot m^{2}}$ a velocidad de flujo promedio $12\frac{m^{3}}{h}$, y $0.42\frac{m^{3}}{hr \cdot m^{2}}$ a velocidad de flujo de pico $25\frac{m^{3}}{h}$.}
    \item{\textbf{Zona anóxica:} Las dimensiones de este sector son de $2,78m$ de largo, $8,74m$ de ancho y $7,00 m$ de alto total. El nivel de trabajo del líquido es de 6 metros. El volumen total anóxico provisto es $240m^{3}$.}
    \item{\textbf{Cuba de recolección de efluente clarificado:} Construida de hormigón armado externamente y solidaria a la pileta principal. El agua, desde la parte superior del clarificador, es colectada por dos tuberías sumergidas, ubicadas simétricamente y perforadas en la parte inferior. Antes de caer a la batea, el líquido es medido por un aforador en V, con ángulo de 30°, construido en acero inoxidable.}
\end{itemize}

\subsection{Tratamiento terciario}

\subsubsection{Etapa de desinfección}

El efluente tratado en la etapa biológica será clorado para desinfección mediante solución de hipoclorito de sodio comercial al $10\% p/p$. Esta desinfección se realiza en la cuba N.°1 de hormigón de $6m^{3}$ de capacidad, aprovechando la caída
del agua desde el vertedero de rebose para lograr una buena mezcla.

Para aumentar el tiempo de contacto, el agua pasa por rebose a una segunda cuba de hormigón de $6m^{3}$ de capacidad. De esta forma, el tiempo de contacto agua-cloro será de unos 40 minutos para asegurar la desinfección antes del ingreso al sistema de filtros.

Contar con dos cubas permitirá eventualmente realizar limpiezas del fondo para extraer materia orgánica que sedimentará a raíz de la oxidación del hipoclorito. El sistema cuenta con un equipo de detención de cloro residual en línea con alarma de máximo y mínimo. La bomba se regula manualmente de manera de mantener un residual de cloro libre entre $0,1ppm$ a $0,2ppm$.

\subsubsection{Filtro de arena}

Luego del tratado con hipoclorito de sodio, el efluente circula a presión por un filtro de manto profundo de arena.

La bomba aspira desde la cuba N.°2 y es la encargada de hacer circular el líquido a través del sistema terciario. En dicha cuba hay boyas para controlar el nivel (En caso de mínimo nivel se detiene la bomba). La presión normal de salida de dicha bomba oscila entre $5.2bar$ a $5.8bar$. El caudal a tratar se regula a la entrada del filtro de arena mediante la válvula mariposa. Este caudal se ajusta en función del rebalse del tratamiento biológico de manera de equilibrar el sistema y mantener períodos de filtración largos. Se debe evitar que la bomba trabaje en forma intermitente.

El filtro está construido en chapa de acero al carbono, y revestido interiormente con epoxi bituminoso. El diámetro es de $1,00m$ y la altura de $2,60m$.

El lecho filtrante se compone básicamente por un manto soporte conformado por canto rodado de granulometrías diferentes (en nuestro caso 5 tamaños) y un lecho filtrante de arena (gruesa y fina). El sentido de flujo del agua a tratar es vertical de arriba hacia abajo. Este tipo de filtros, con mantos filtrantes de arena de $1.5m$ de espesor, pueden lograr remociones del 95\% de partículas hasta de 3 micrones de tamaño (dependiendo de la calidad de agua de ingreso).

\subsubsection{Filtro de carbón activado}

El efluente filtrado y libre de sólidos en suspensión, finalmente circula por un equipo purificador de carbón activado para el pulido final de sólidos y eliminación de cloro residual.

El equipo consta de un tanque cilíndrico de chapa de acero de $1,3m$ de diámetro y $2,2m$ de alto. Posee un sistema colector interno de acero inoxidable sumergido en un manto soporte de canto rodado y sobre éste se deposita el manto de carbón.

El flujo de agua es descendente. Durante el funcionamiento, el lecho de carbón se va compactando, con lo cual es necesario efectuar lavados a contracorriente al menos cada 24 horas.

\section{Eficiencia energética}

\label{anexo:calculoEconomicoInicial}
	
Gracias al control a demanda de los sopladores, los motores encargados de la aireación no funcionarían al $100\%$ siempre, esto provocará el desbloqueo de un potencial ahorro energético.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/economia/sopladores.png}
\end{figure}

En ventiladores y bombas centrífugas se cumple que el caudal es proporcional a la velocidad, la presión o altura es proporcional al cuadrado de la relación de velocidad y, por consiguiente, la potencia (caudal x altura) es proporcional al cubo de la relación de velocidades.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| l | l |}
            \hline
            \multicolumn{2}{| c |}{Sopladores de aireación} \\ \hline
            Tipo & Desplazamiento positivo \\
            Marca & Repicky \\
            Modelo & R3.0 \\
            Capacidad & 1.631$m^{3} / h$ \\
            Tamaño del motor & 75HP \\ \hline
        \end{tabular}
    \end{center}

    \caption{Características de los Sopladores Repicky R3.0 encargados del proceso de aireación.}
\end{table}

Esto significa que si a $1500rpm$ se consumen $75HP$ de potencia, a $750rpm$ consumirá:

$$P_{out} = \left( \frac{750rpm}{1500rpm} \right)^{3} \cdot 75HP = 9.375HP$$

En otras palabras, al disminuir la velocidad a la mitad (o caudal a la mitad), se consumen solo $9.375HP$, es decir, se ahorra un $87.5\%$.

Tomando como fuente el proyecto de grado \cite{ATEVF} en donde se detalla y se cita un estudio de ahorro energético en diversas aplicaciones de motores de inducción utilizando variadores de frecuencia, podemos ver la siguiente tabla:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| l | l | l |}
            \hline
            \textbf{Aplicación} & \textbf{Ahorro promedio} & \textbf{Aplicabilidad} \\ \hline
            Bombas & 35\% & 60\% \\ \hline
            Ventiladores & 35\% & 60\% \\ \hline
            Compresores de aire & 15\% & 30\%\\ \hline
            Compresores fríos & 15\% & 40\% \\ \hline
            Tornillos sin fin & 15\% & 60\% \\ \hline
            Otros & 15\% & 60\% \\ \hline
        \end{tabular}
    \end{center}

    \caption{Potencial de ahorro en el sector industrial.}
\end{table}

Este caso las bombas impulsoras son equipos que se encuentran sometidos a variaciones durante su operación. Por eso es importante la incorporación de variadores de frecuencia a los motores encargados de generar la estrangulación de aire.

Se puede observar que el ahorro promedio ronda en torno a los $35\%$. Esto se puede traducir directamente en costo energético.

\section{Características del sistema}

\label{anexo:caracteristicasDelSistema}

\subsection{Sistema de suministro de aire}

Según la información proporcionada por EGGER, el sistema de suministro de aire está compuesto por un de desplazamiento positivo tipo lóbulos rotativos, marca Repicky, modelo R3.0 con una capacidad de $1631 \frac{m^{3}}{h}$. A este soplador se le acopla un motor con una potencia de 75 Hp.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/blowerInformation.png}
\end{figure}

Para tener más información del sistema se accede al sitio web del fabricante Repicky donde descargamos un folleto del soplador. Las siguientes imágenes son fragmentos del mismo que fueron utilizadas para una mejor caracterización.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/caracteristicasConstructivas.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/tablaDeSeccionSopladores.png}
\end{figure}

Como no tenemos información sobre las características del motor, salvo su potencia, entramos a la tabla anterior según el modelo R3.0 y seleccionamos un soplador de características similares.

De la siguiente imagen podemos extraer las RPM del motor para cumplir con el caudal y la presión generada:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/caudalPresion.png}
\end{figure}

$$P = 75.8HP$$

$$Q = 1759 \frac{m^{3}}{h} = 29.316 \frac{m^{3}}{min}$$

$$RPM = 2250 \frac{rev}{min}$$

$$C = \frac{Q}{RPM} \frac{29.316 \frac{m^{3}}{min}}{2250 \frac{rev}{min}} = 0.013026 \frac{m^{3}}{rev} = 13.026 \frac{Lts}{rev}$$

$$v = \frac{Q}{A} = \frac{0.4886 \frac{m^{3}}{s}}{\pi  \left( \frac{0.158m}{2} \right)^{2}} = 24.9 \frac{m}{s}$$

Cabe resaltar que la información del fabricante no coincide en su totalidad con la proporcionada por EGGER, debido a las tolerancias de $\pm 5\%$ especificadas por el fabricante.

\begin{itemize}
    \item{$C$: cilindrada.}
    \item{$v$: velocidad de salida del soplador.}
\end{itemize}

\subsection{Sistema de distribución de aire}

Tomando como referencia la información proporcionada por EGGER, el sistema de distribución de aire está compuesto por una tubería principal en T de 150NB a la que se le acoplan 12 tubos de 80 NB con 20 perforaciones c/u de 7 mm de diámetro que forman la grilla de aireación. El material de los tubos es HDPE (polietileno de alta densidad).

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/sistema/informacionDeAireacion.png}
    \caption{Información de las rejillas de difusión.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.325]{src/imagenes/sistema/diagramaRegillas1.png}
    \caption{Diagrama de distribución de aire en la pileta.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.375]{src/imagenes/sistema/diagramaRegillas2.png}
    \caption{Diagrama de las rejillas difusoras.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/diagramaRegillasInventor.png}
    \caption{Diagrama modelado en Inventor.}
\end{figure}

Para dimensionar los diámetros de las tuberías nos basamos en la Norma ASTMF-714:2012 de Tuberías lisas HDPE, el diagrama e información del sistema de aireación proporcionado por EGGER y los datos del fabricante Repicky.

\subsubsection{Datos del fabricante Repicky:}

El folleto de Repicky nos provee una tabla de medidas generales, donde extraemos la conexión de salida para el Modelo del soplador R3.0 que es de 6 pulgadas.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/normaTuberias.png}
\end{figure}

\subsubsection{Norma ASTMF-714:2012 para Tuberías lisas HDPE:}

Al no contar con información de la empresa sobre los espesores de las tuberías nos basamos en la Norma ASTMF-714:2012. Con los diámetros nominales mencionados anteriormente entramos a la tabla y comparamos las presiones de trabajo máximo de las tuberías según la norma y la suministrada por el fabricante del soplador, que es de 1[bar] o 14,5[Psi]. Donde llegamos a la conclusión que trabajando con los espesores de la primera columna 51[Psi] o 63[Psi] dependiendo el tipo de tubería, tenemos un margen de seguridad de 36.5[Psi] o 48.5[Psi].

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/tuberiaLisaHDPENorma.png}
\end{figure}

La relación SDR corresponde al cociente entre el diámetro externo y el espesor de la tubería.

\textbf{Salida 150NB o 6 pulgadas:}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/tuberiaLisaHDPENorma2.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/graficaTuberiaLisa.jpg}
\end{figure}

$$D_{n} = 168.3mm$$

$$e = 5.2mm$$

$$SDR = \frac{D_{e}}{e} = 32.5 = SDR \cdot e$$

\textbf{Conductos Perforados 80 NB:}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/tuberiaLisaHDPENorma3.png}
\end{figure}

$$D_{n} = 88.9mm$$

$$e = 2.7mm$$

$$SDR = \frac{D_{e}}{e} = 32.5 = SDR \cdot e$$

$$D_{e} = 32.5 \cdot 2.7 = 87.75mm$$

$$D_{i} = D_{e} - e = 87.75mm - 2 \cdot 2.7mm = 82.35mm$$

\section{Cálculos del sistema}

\label{anexo:calculosDelSistema}

\subsection{Presión del volumen de agua sobre la salida de aire}

Una de las principales características que debe cumplir el sistema de control es garantizar el ingreso continuo de aire en la pileta de lodos activos.

El aire se debe suministrar por medio de un proceso de compresión para que pueda salir a través de los orificios o difusores; esto solo es posible, si la presión del aire comprimido es superior a la presión absoluta que se ejerce sobre los difusores, la cual es resultado de la presión hidrostática del agua y la presión atmosférica. Por esta razón surge la necesidad de analizar la relación de presiones entre el sistema de aireación y el volumen de agua residual.

Comenzamos el análisis realizando un modelo en Inventor de la pileta con su respectivo sistema de aireación. Esto nos permitió obtener las dimensiones exactas y determinar la altura del volumen de agua con respecto a la grilla de aireación.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/piletas1.png}
\end{figure}

En la siguiente imagen se puede observar el plano con las cotas necesarias para los cálculos: 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/sistema/piletas2.png}
\end{figure}

Para los cálculos nos basamos en una rama de la dinámica de fluidos, la hidrostática, para ser más precisos en el concepto de fuerzas hidrostáticas sobre superficies sumergidas.

Partimos de los siguientes datos suministrados por EGGER:

$$h = 6.455m$$

$$\rho = 1.03 \frac{g}{cm^{3}} = 1030 \frac{Kg}{m^{3}}$$

$$g = 9.81\frac{m}{s^{2}}$$

Como se mencionó anteriormente en la caracterización del sistema de distribución de aire, tenemos 12 conductos de polietileno de alta densidad con 20 perforaciones c/u de diámetro $7mm$. Los mismos se encuentran sumergidos en la pileta de lodos activos a una profundidad de 6,455[m].

Un aspecto a resaltar es que si bien las perforaciones están realizadas sobre la cara de un tubo cilíndrico, para simplificar los cálculos se consideraran las fuerzas hidrostáticas sobre una superficie plana sumergida y no sobre una superficie curva sumergida.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.3]{src/imagenes/sistema/tuberias1.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/tuberias2.png}
\end{figure}

Para calcular la distribución de presión en el punto de interés se parte de la ecuación diferencial de la hidrostática:

$$\rho \cdot g - \nabla p = 0$$

\begin{itemize}
    \item{$\rho$: densidad.}
    \item{$g$: aceleración de la gravedad.}
    \item{$\nabla p$: vector gradiente de campo de presiones.}
\end{itemize}

Su carácter vectorial implica las siguientes ecuaciones:

$$\frac{\delta p}{\delta x} = p \cdot g_{x} ; \frac{\delta p}{\delta y} = p \cdot g_{y} ; \frac{\delta p}{\delta z} = p \cdot g_{z}$$

\begin{figure}[H]
    \centering
    \includegraphics[scale=1]{src/imagenes/sistema/presionesHidroestatica.png}
\end{figure}

Como uno de sus ejes coincide con la aceleración de la gravedad tenemos:

$$\frac{\delta p}{\delta x} = 0 ; \frac{\delta p}{\delta y} = 0 ; \frac{\delta p}{\delta z} = p \cdot g_{z}$$

La ecuación nos dice que la presión no depende de las coordenadas $x$ e $y$, siendo solo función de $z$. Esto es, todos los puntos del fluido que se encuentren a una misma altura estarán a la misma presión, independientemente de la forma del recipiente.

Por otra parte, la funcionalidad de la presión con la altura la determinaremos integrando la componente $z$. 

$$\frac{\delta p}{\delta z} = -\rho \cdot g_{z} \rightarrow p = -\rho \cdot g \cdot z + C$$

La condición de borde es que la presión en $z = h$ es la atmosférica. Quedando:

$$p = p_{o} + \rho \cdot g \cdot (h - z)$$

Donde $z = 0$ debido a que consideramos directamente la altura del orificio.

$$p = p_{o} + \rho \cdot g \cdot h$$

$$h = 6.445m$$

$$\rho 1.03 \frac{g}{cm^{3}} = 1030 \frac{Kg}{m^{3}}$$

$$g = 9.81 \frac{m}{s^{2}}$$

$$p = p_{o} + 1030 \frac{Kg}{m^{3}} \cdot 9.81 \frac{m}{s^{2}} \cdot 6.445m = p_{o} + 65156.77 \frac{Kg}{m \cdot s^{2}}$$

$$p = p_{o} + 0.651bar$$

Donde según el Histórico del Tiempo en Concordia la presión atmosférica máxima es de 1014hPa:

$$p = 1.014hPa + 0.651hPa$$

$$p = 1.665hPa$$

La presión que debe vencer el aire para ingresar a la pileta es de $1.665bar$.

En cualquier área pequeña $dA$ existe una fuerza $dF$ que actúa de modo perpendicular al área, debido a la presión $p$ del fluido. Pero la magnitud de la presión a cualquier profundidad $h$ en un líquido estático de peso específico $\gamma$ es $p = \gamma \cdot h$.
Entonces, la fuerza es:

$$dF = p(dA) = \gamma \cdot h (dA)$$

La suma de las fuerzas en toda la superficie se obtiene por medio del proceso matemático de integración:

$$F = \int_{A}{-np(dA)} = p \cdot \pi \cdot r^{2}$$

$$1Pa = 1 \frac{Kg}{m \cdot s^{2}}$$

$$1014hPa = 101400Pa$$

$$F = \left( p_{o} + 65156.77 \frac{Kg}{m \cdot s^{2}} \right) \cdot \pi \cdot (0.007m)^{2}$$

$$F = 1.539 \times 10^{-4} m^{2} \cdot p_{o} + 10.03 \frac{kgm}{s^{2}}$$

$$F = 1.539 \times 10^{-4} m^{2} \cdot 101400 \frac{Kg}{m \cdot s^{2}} + 10.03 \frac{kgm}{s^{2}}$$

$$F = 15.61 \frac{Kgm}{s^{2}} + 10.03 \frac{kgm}{s^{2}}$$

$$F = 25.63 \frac{Kgm}{s^{2}} = 25.63 N$$

Para poder ingresar a la pileta de lodos, el aire debe de ejercer una fuerza de $25.63 N$ sobre el área de cada orificio de la grilla de aireación.

\subsection{Cálculos del Flujo de aire en las tuberías}

En este apartado se busca determinar la velocidad del aire en el sistema de cañerías en función al caudal de entrada para luego poder estimar de manera aproximada las pérdidas en las mismas. Como no tenemos la información precisa del sistema de tuberías desde la bomba hasta la grilla interna de la pileta, supondremos que la salida de esta es un tubo que se conecta mediante un acople en T directo a la grilla.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/diagramaRegillasInventor.png}
\end{figure}

Para la realización de los cálculos nos basamos en las siguientes Hipótesis:

\begin{itemize}
    \item{Partimos de un estado estacionario.}
    \item{Volumen de control fijo: para todas las áreas se cumple que $\omega = 0$ (velocidad relativa de las áreas).}
    \item{No tenemos datos para calcular el perfil de velocidades del fluido, por lo que se considera flujo turbulento con perfiles de velocidad planos, cuyo valor es su valor medio.}
    \item{Fluido incompresible y puro (densidad constante).}
    \item{Fuerzas gravitatorias (peso del fluido en el volumen de control) despreciables.}
    \item{La velocidad del fluido en áreas sólidas es nula.}
\end{itemize}

\subsubsection{En la primera conexión en T tenemos:}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.8]{src/imagenes/sistema/t.png}
\end{figure}

$$A_{1} = A_{2} = A_{3} = \frac{\pi \cdot D^{2}}{4}$$

$$D = D_{i} 158.9mm = 0.1589m$$

$$A_{1} = A_{2} = A_{3} = \frac{\pi \cdot (0.1589m)^{2}}{4} = 0.01975 m^{2}$$

Luego tenemos las dos variables a controlar que son la velocidad y el caudal de aire que se relacionan mediante la siguiente fórmula:

$$v = \frac{Q}{A}$$

Aplicando balance microscópico de masa:

$$\frac{\delta}{\delta t} \int_{v(t)}{\rho \cdot dv} + \int_{v(t)}{\rho (\overrightarrow{v} - \overrightarrow{\gamma}) \cdot \overrightarrow{n} \cdot dA}$$

\begin{itemize}
    \item{$\rho$: densidad.}
    \item{$\overrightarrow{v}$: velocidad del fluido.}
    \item{$\overrightarrow{\gamma}$: velocidad relativa de las áreas. $= 0$.}
    \item{$ \overrightarrow{n}$: normal a la superficie.}
\end{itemize}

Considerando las hipótesis planteadas anteriormente nos queda:

$$\int_{A_{1}}{\rho \cdot \overrightarrow{v}_{1} \cdot \overrightarrow{n}_{1} \cdot dA_{1}} + \int_{A_{2}}{\rho \cdot \overrightarrow{v}_{2} \cdot \overrightarrow{n}_{2} \cdot dA_{2}} + \int_{A_{3}}{\rho \cdot \overrightarrow{v}_{3} \cdot \overrightarrow{n}_{3} \cdot dA_{3}} = 0$$

\begin{figure}[H]
    \centering
    \includegraphics[scale=.8]{src/imagenes/sistema/t2.png}
\end{figure}

$$\overrightarrow{n_{1}} = \overrightarrow{j} \cdot \overrightarrow{n_{2}} = - \overrightarrow{i} \cdot \overrightarrow{n_{3}} = \overrightarrow{i}$$

$$\overrightarrow{v_{1}} = v_{1} \cdot (-\overrightarrow{j}) \cdot \overrightarrow{v_{2}} = v_{2} \cdot (-\overrightarrow{i}) \cdot \overrightarrow{v_{3}} = v_{3} \cdot (\overrightarrow{i})$$

$$\overrightarrow{v_{1}} \cdot \overrightarrow{n_{1}} = |\overrightarrow{v_{1}}| \cdot |\overrightarrow{n_{1}}| \cdot \cos{(180)}$$

$$\overrightarrow{v_{2}} \cdot \overrightarrow{n_{2}} = |\overrightarrow{v_{2}}| \cdot |\overrightarrow{n_{2}}| \cdot \cos{(0)}$$

$$\overrightarrow{v_{3}} \cdot \overrightarrow{n_{3}} = |\overrightarrow{v_{3}}| \cdot |\overrightarrow{n_{3}}| \cdot \cos{(0)}$$

$$\overrightarrow{v_{1}} \cdot \overrightarrow{n_{1}} = -v_{1}$$

$$\overrightarrow{v_{2}} \cdot \overrightarrow{n_{2}} = v_{2}$$

$$\overrightarrow{v_{3}} \cdot \overrightarrow{n_{3}} = v_{3}$$

Nos queda en el balance:

$$-\int_{A_{1}}{v_{1} \cdot dA_{1}} + \int_{A_{2}}{v_{2} \cdot dA_{2}} +  \int_{A_{3}}{v_{3} \cdot dA_{3}} = 0$$

$$v_{1} A_{1} = v_{2} A_{2} + v_{3} A_{3}$$

Luego como:

$$A_{1} = A_{2} = A_{3} = \frac{\pi \cdot D^{2}}{4}$$

$$v_{1} A_{1} = v_{2} A_{2} + v_{3} A_{3}$$

$$v_{2} = v_{3} = \frac{v_{1}}{2}$$

Suponiendo que el aire se distribuye de manera uniforme en las 12 ramificaciones en T de los difusores, realizamos un plateo análogo al anterior que nos da como resultado:

$$\int_{A_{1}}{\rho \cdot \overrightarrow{v}_{1} \cdot \overrightarrow{n}_{1} \cdot dA_{1}} + \int_{A_{2}}{\rho \cdot \overrightarrow{v}_{2} \cdot \overrightarrow{n}_{2} \cdot dA_{2}} + \int_{A_{3}}{\rho \cdot \overrightarrow{v}_{3} \cdot \overrightarrow{n}_{3} \cdot dA_{3}} = 0$$

\begin{figure}[H]
    \centering
    \includegraphics[scale=.8]{src/imagenes/sistema/t3.png}
\end{figure}

$$\overrightarrow{n_{2}} = \overrightarrow{j} \cdot \overrightarrow{n_{1}} = - \overrightarrow{i} \cdot \overrightarrow{n_{3}} = \overrightarrow{i}$$

$$\overrightarrow{v_{1}} = v_{1} \cdot \overrightarrow{i} \cdot \overrightarrow{v_{1}} = v_{2} \cdot \overrightarrow{j} \cdot \overrightarrow{v_{3}} = v_{3} \cdot (\overrightarrow{i})$$

$$\overrightarrow{v_{1}} \cdot \overrightarrow{n_{1}} = |\overrightarrow{v_{1}}| \cdot |\overrightarrow{n_{1}}| \cdot \cos{(180)}$$

$$\overrightarrow{v_{2}} \cdot \overrightarrow{n_{2}} = |\overrightarrow{v_{2}}| \cdot |\overrightarrow{n_{2}}| \cdot \cos{(0)}$$

$$\overrightarrow{v_{3}} \cdot \overrightarrow{n_{3}} = |\overrightarrow{v_{3}}| \cdot |\overrightarrow{n_{3}}| \cdot \cos{(0)}$$

$$\overrightarrow{v_{1}} \cdot \overrightarrow{n_{1}} = -v_{1}$$

$$\overrightarrow{v_{2}} \cdot \overrightarrow{n_{2}} = v_{2}$$

$$\overrightarrow{v_{3}} \cdot \overrightarrow{n_{3}} = v_{3}$$

Nos queda en el balance:

$$-\int_{A_{1}}{v_{1} \cdot dA_{1}} + \int_{A_{2}}{v_{2} \cdot dA_{2}} +  \int_{A_{3}}{v_{3} \cdot dA_{3}} = 0$$

$$v_{1} A_{1} = v_{2} A_{2} + v_{3} A_{3}$$

Luego como:

$$A_{1} = A_{3} = \frac{\pi \cdot D_{1}^{2}}{4}$$

$$A_{2} = \frac{\pi \cdot D_{2}^{2}}{4}$$

$$v_{1} A_{1} - v_{3} A_{3} = v_{2} A_{2}$$

Como las áreas no son iguales nos queda una ecuación con dos incógnitas $v_{1}$ y $v_{2}$ por lo que no se puede seguir resolviendo aplicando balance microscópico de masa.

Sin embargo, estos cálculos nos servirán en las etapas siguientes para verificar que la simulación del sistema esté arrojando resultados correctos.

\section{Simulación del sistema}

Para poder continuar con el análisis del flujo de aire en el sistema de tuberías lo modelamos en un software para el cálculo de pérdidas de carga en tuberías denominado FLUIDFLOW, cuyas opciones de cálculo se basan en los principios y ecuaciones de mecánica de fluidos más reconocidos universalmente: número de Reynolds, Bernoulli, ecuaciones de Darcy Weisbach, diagrama de Moody, Hazen Williams, Duxbury, Wilson Addie Selgren y Clif entre otros.

\subsection{Modelado con los datos de entrada}

El objetivo con este software es lograr una simulación lo más precisa posible que nos permita sacar conclusiones sobre la reacción del sistema ante un cambio de la energía entregada al motor. Esto requiere no solo el modelado del sistema con sus respectivas cañerías y conexiones, sino también el ingreso correcto de los datos de entrada. Para el modelado y simulación utilizamos todos los cálculos de los apartados anteriores.

\subsubsection{Sistema de suministro de aire}

Comenzamos definiendo el primer límite conocido que representa el medio ambiente que suministra el aire al soplador.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow1.png}
\end{figure}

En este definimos el tipo de fluido (aire), un volumen que represente el ambiente de donde se extrae el aire, la temperatura ambiente donde consideramos una media de 25 °C y una presión de 1[atm] que representa la presión atmosférica máxima.

Luego definimos el soplador y cargamos sus características. En nuestro caso tenemos un soplador de desplazamiento positivo con una presión de máxima de 1[Bar] y según los cálculos anteriores una cilindrada de $13.026 \frac{Lts}{rev}$. Consideramos una eficiencia del $90\%$.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/sistema/fluidflow2.png}
\end{figure}

Cargamos el soplador en el modelo y  definimos su velocidad de operación de 2250 RPM según el folleto de Repicky. 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow3.png}
\end{figure}

\subsubsection{Sistema de distribución de aire}

El modelado del sistema de distribución de aire requiere definir el tipo de tubería a utilizar, el software tiene una base de datos con una serie de tuberías de diferentes materiales.

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.2]{src/imagenes/sistema/fluidflow4.png}
\end{figure}

Si bien no está disponible la tubería de HDPE, la más parecida según su relación de diámetros y rugosidad es la PE polietileno.

\textbf{Tubería principal}

Definimos el primer tramo desde el soplador al primer acople T de 6 pulgadas de diámetro nominal y 6,455[m] de longitud.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow5.png}
\end{figure}

Luego, para los dos primeros tramos después de la T también le asignamos 6 pulgadas de diámetro nominal y 1[m] de longitud.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow6.png}
\end{figure}

Por último, cada tramo de tubería posterior para ambos lados, son también de  6 pulgadas de diámetro nominal y 1,467[m] de longitud.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow7.png}
\end{figure}

\textbf{Tuberías grilla de aireación}

Como se mencionó anteriormente, la grilla de aireación está compuesta de tubos de 3 pulgadas de dímetro nominal con una longitud de 8,6 [m].

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow8.png}
\end{figure}

\textbf{Condiciones de salida}

Por último, definimos el límite de salida que representa la pileta con el agua residual, cuyas características se definen según los datos provistos por EGGER para la temperatura y los cálculos anteriores para la presión.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/fluidflow9.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.25]{src/imagenes/sistema/fluidflow10.png}
\end{figure}

\subsection{Modelado e ingreso de datos de entrada}

Antes de comenzar con el análisis de los resultados arrojados por el software, vale la pena aclarar que estamos en presencia de un sistema muy complejo para un simple análisis matemático aplicando dinámica de fluidos. Lo ideal sería realizar ensayos y mediciones sobre el sistema real en funcionamiento. Pero de todos modos los cálculos anteriores y la simulación del sistema nos sirven para sacar las primeras conclusiones sobre la posible reacción del mismo a
un cambio en la velocidad de giro del motor.

\textbf{Soplador Trabajando a 2250 RPM}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/fluidflow11.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/fluidflow12.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/fluidflow13.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.3]{src/imagenes/sistema/fluidflow14.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/fluidflow15.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/fluidflow16.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/fluidflow17.png}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/fluidflow18.png}
\end{figure}

\section{Oxígeno disuelto en aguas residuales}

\label{anexo:oxigenoDisuelto}

El oxígeno disuelto se establece como la concentración actual en mg/L, o como la cantidad de oxígeno que puede tener el agua a una temperatura determinada. El OD varía en función de:

\begin{itemize}
    \item{Temperatura.}
    \item{Oxígeno disuelto de las fuentes (entradas).}
    \item{Altitud.}
    \item{Salinidad.}
\end{itemize}

\subsection{Variaciones del OD}

\subsubsection{La temperatura}

Al aumentar la temperatura, disminuye la cantidad de oxígeno disuelto en el agua. Cuando el agua contiene todo el oxígeno disuelto a una temperatura dada, se dice que está 100 por cien saturada de oxígeno.

La tabla siguiente muestra la concentración de oxígeno disuelto equivalente a un grado de saturación del 100 por cien para la temperatura anotada (y la presión barométrica normal):

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/tablaOD.png}
\end{figure}

\subsubsection{Oxígeno disuelto de las fuentes}

Corresponde al OD que trae consigo el caudal de ingreso de agua residual. El mismo se genera mediante el proceso de aireación natural, por contacto del agua con el aire. Cuando cambiamos la superficie de agua que entra en contacto con el aire, la sometemos a aireación en forma permanente, sin embargo, el proceso de difusión de los gases en el agua es sumamente lenta y su distribución depende del movimiento de la misma. Este proceso es natural y continuo, cuya dirección y velocidad depende del contacto entre el aire y el agua.

\subsubsection{Altitud}

El agua contiene menos oxígeno en los lugares altos. Esto se debe a la presión atmosférica y su efecto sobre el proceso de difusión de oxigeno en el agua. A menor altitud mayor presión atmosférica que favorece el proceso de difusión.

\subsubsection{Salinidad}

Cuando la salinidad aumenta, el oxígeno disuelto disminuye. Esto se debe a que la densidad del agua aumenta por la concentración de sales, afectando el proceso de difusión de oxígeno y generando una disminución de la capacidad de absorción.

\subsection{El sensor de OD}

Actualmente, para medir el OD, la empresa EGGER tiene el sensor \href{https://afcintl.com/p/model-q46d-dissolved-oxygen-monitor-from-analytical-technology/}{DissolvedOxygenMonitor Model Q46D}:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/sensorOD.jpg}
    \caption{Sensor de OD actualmente en funcionamiento.}
\end{figure}

El sensor óptico de OD funciona según un principio basado en la luz llamado fluorescencia, que es un tipo de luminiscencia. Ciertos compuestos químicos absorberán un tipo de energía luminosa y luego emitirán un tipo diferente de energía luminosa. Esta emisión de luz se llama luminiscencia.

La parte activa del sensor tiene un compuesto a base de metal incrustado en una matriz estructural. Una fuente de luz dentro del sensor ilumina este compuesto que absorbe luz a una longitud de onda específica. Luego, el compuesto emite luz a una longitud de onda diferente que es captada por un fotodetector dentro del sensor. A medida que el oxígeno se difunde en el material del sensor activo, interactúa con el compuesto absorbente de luz e interfiere con la reacción de la misión. Esta interacción, llamada extinción, hace que el material que absorbe la luz libere energía en una forma distinta a la luz. El grado de extinción es proporcional a la concentración de oxígeno disuelto. La reacción de extinción es reversible, lo que permite que este sensor mida concentraciones crecientes y decrecientes de oxígeno.

\subsection{Demanda bioquímica de oxígeno (DBO)}

La determinación de este parámetro permite estimar los efectos de las descargas de efluentes domésticos e industriales sobre la calidad de las aguas de los cuerpos receptores, porque brinda una idea de la cantidad de oxígeno disuelto que deberá aportar el cuerpo receptor para depurar el vuelco.

Para realizar el ensayo, las muestras se incuban en la oscuridad a 20 °C, durante un tiempo determinado. Antes y después de esta incubación se determina la concentración de oxígeno disuelto. La diferencia entre estos dos valores es la cantidad de oxígeno que requieren los microorganismos para consumir la materia orgánica biodegradable del líquido. Como el tiempo de incubación adoptado es de 5 días, el nombre de este parámetro se abrevia DBO5.

\subsubsection{¿Por qué se determina?}

La DBO5 es el parámetro universalmente adoptado para determinar los niveles de polución orgánica biodegradable de un cuerpo de agua y de los efluentes que allí se vuelcan. Por esta razón, las normativas vigentes exigen su determinación.

La DBO5 permite evaluar el rendimiento de la planta depuradora y es uno de los principales parámetros que se contemplan para diseñar y calcular las dimensiones de nuevas instalaciones de tratamiento de aguas residuales.

\subsection{Demanda química de oxígeno (DQO)}

Mientras que la DBO5 solo detecta el material orgánico que degradan los microorganismos, la DQO incluye también los compuestos orgánicos no biodegradables y algunos compuestos inorgánicos.

En la actualidad, la técnica más utilizada para determinar la DQO es el método de reflujo cerrado en termorreactor con cuantificación colorimétrica. El mercado ofrece kits de viales y soluciones preparadas que han simplificado el ensayo y evitan la preparación de soluciones y titulaciones prolongadas y laboriosas.

\subsubsection{¿Por qué se determina?}

La DQO es uno de los parámetros regulados por todas las normas de vuelco para plantas depuradoras. Brinda una rápida idea del contenido total de compuestos orgánicos y es de gran ayuda para detectar ingresos de líquidos de origen industrial. Valores elevados de DQO en el afluente pueden alertar sobre vuelcos industriales con elevado contenido orgánico.

En el proceso de depuración, sirve principalmente como un parámetro de control y confirmación de otras mediciones. La DQO suele presentar una alta correlación con la DBO5 y con la materia en suspensión (2,5-3,5:1), de manera que su resultado sirve para confirmar o bien estimar otros parámetros.

Los métodos colorimétricos comerciales de uso actual son ensayos sencillos y rápidos (alrededor de 3 horas en total).

\subsection{Valores límite vigentes}

Actualmente, en Concordia, Entre Ríos, Argentina, rige sobre los efluentes líquidos \href{https://www.entrerios.gov.ar/ambiente/userfiles/files/archivos/Normativas/Res_\%20554-15.pdf}{la siguiente normativa.}

\section{Aproximación del sistema}

\label{anexo:aproximacionDelSistema}

Basándose en el artículo académico \cite{CPCOD}, en donde se sostiene que la dinámica de cambio de la concentración de OD se puede representar como:

$$\frac{dC_{o}}{dt} = K_{L} a (C_{\infty}^{\Theta} - C_{o})$$

Donde:

\begin{itemize}
    \item{$C_{o}$: concentración de oxígeno disuelto en el seno del líquido para el agua residual aproximada en $g/m^{3}$.}
    \item{$C_{\infty}^{\Theta}$: concentración de saturación del oxígeno disuelto en el volumen del líquido a una temperatura T del agua y a una presión atmosférica de campo en $g/m^{3}$. Igual a $7,5g/m^{3}$}
    \item{$K_{L}$: el coeficiente de transferencia de oxígeno y  el área total de contacto interfacial por unidad de volumen de líquido. Como se admite imposible medir el área interfacial $a$, se estima el término total $K_{L} a$.}
\end{itemize}

Si aplicamos balance de oxígeno en el bioreactor tenemos:

$$\frac{dC_{o}}{dt} = \frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V} C_{o} + a (1 - e^{\frac{-Q_{A}}{b}}) (C_{\infty}^{\Theta} - C_{o})$$

Donde:

\begin{itemize}
    \item{$V$: volumen del bioreactor $871,03 m^{3}$.}
    \item{$Q_{f}$: flujo de entrada de agua residual $12 m^{3}/h$ promedio diario.}
    \item{$Q_{r}$ flujo recirculación de biomasa aproximadamente 50\% del $Q_{f}$ $6 m^{3}/h$.}
    \item{$C_{0f}$: concentración DO en el flujo de entrada $8,23mg/l$ o $8,23g/m^3$.}
\end{itemize}

En nuestro caso, se considera un sistema ideal en el cual, todo el caudal de aire suministrado por el soplador ingresa a la pileta (no se consideran perdidas), entonces tenemos: 

\begin{itemize}
    \item{$Q_{A}$: caudal de aire $0.78 m^3/h \cdot RPM$.}
    \item{$RPM$: fijadas por el variador.}
    \item{$C_{o}$: concentración de oxígeno disuelto en el seno del líquido para el agua residual aproximada en $g/m^{3}$.}
    \item{$C_{\infty}^{\Theta}$: valores de tabla para diferentes temperaturas.}
\end{itemize}

Los valores de los parámetros $a$ y $b$ son determinados por identificación por medio del modelo de Smith.

Considerando la concentración de oxígeno disuelto en el seno del líquido como variable del y reordenando los términos: 

\begin{equation}
    \frac{dC_{o}}{dt} + (a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) C_{o} = a (1 - e^{\frac{-Q_{A}}{b}}) C_{\infty}^{\Theta}
    \label{eqn:oxigenoD}
\end{equation}

Como se puede apreciar en \eqref{eqn:oxigenoD}, es una ecuación diferencial lineal de primer orden, la cual no es separable. De la forma:

$$\frac{dy}{dt} + P(t) y = Q(t)$$

Toda ecuación diferencial lineal de primer orden se puede resolver al multiplicar ambos lados de la ecuación por una función adecuada I (x) llamada factor integrante.

$$factor-integrante = I(t) = e^{\int P(t) dt}$$

$$ P(t) = (a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) $$

$$ \int P(t) = (a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t $$

Al multiplicar ambos lados de la ecuación \eqref{eqn:oxigenoD} se obtiene:

$$\frac{dC_{o}}{dt} e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} + (a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) C_{o} $$

\begin{equation}
    e^{(a (1-e^{\frac{-Q_{A}}{b}}) - \frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} = a (1 - e^{\frac{-Q_{A}}{b}}) C_{\infty}^{\Theta} e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t}
    \label{eqn:consentracionOD_FI}
\end{equation}

En la ecuación \eqref{eqn:consentracionOD_FI} se puede apreciar que: 

$$\frac{dC_{o}}{dt} e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} + (a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) C_{o}$$

$$e^{(a (1-e^{\frac{-Q_{A}}{b}}) - \frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} = \frac{d(e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} C_{o})}{dt} $$

Sustituyendo en la ecuación \eqref{eqn:consentracionOD_FI} :

\begin{equation}
    \frac{d(e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} C_{o})}{dt} = 
    a (1 - e^{\frac{-Q_{A}}{b}}) C_{\infty}^{\Theta} e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t}
    \label{eqn:consentracionOD_FI_1}
\end{equation}

Al integrar ambos lados de \eqref{eqn:consentracionOD_FI_1}:

$$e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t} C_{o} =$$

\begin{equation}
    \frac{a (1 - e^{\frac{-Q_{A}}{b}}) C_{\infty}^{\Theta} e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t}}{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V})} + C
    \label{eqn:consentracionOD_FI_2}
\end{equation}

Despejando la concentración de oxígeno disuelto en función a un caudal en RPM de la ecuación \eqref{eqn:consentracionOD_FI_2}:

\begin{equation}
    C_{o} = \frac{a (1 - e^{\frac{-Q_{A}}{b}}) C_{\infty}^{\Theta}}{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V})} + \frac{C}{e^{(a (1-e^{\frac{-Q_{A}}{b}})-\frac{Q_{f}}{V} C_{of} - \frac{Q_{f} + Q_{r}}{V}) t}}
    \label{eqn:consentracionOD_FI_F}
\end{equation}

Para lograr un sistema de control preciso, la fórmula matemática que modela el comportamiento del sistema tiene que ser lo más exacta posible y permitir ajustarse a las condiciones reales. Para cumplir con este objetivo, se modelaba y ensaya la fórmula en Python donde se analizan los resultados arrojados.

Para valores de:

\begin{itemize}
    \item{$V$: $871,03 m^{3}$.}
    \item{$Q_{f}$: $12 m^{3}/h$ promedio diario.}
    \item{$Q_{r}$: $6 m^{3}/h$.}
    \item {$t$: $h$.}
    \item{$C_{0f}$: $8,23g/m^3$.}
    \item{$RPM$: 2800}
    \item{$Q_{A}$: $0.78 m^3/h \cdot RPM$.}
    \item{$C_{\infty}^{\Theta}$: $8,23g/m^{3}$}
    \item{$a$: 8.5}
    \item{$b$: 2}
\end{itemize}

Se obtiene la siguiente gráfica en función al tiempo t: 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/analisis1.png}
    \caption{Concentración de oxigeno disuelto en el seno del liquido.}
\end{figure}

Como se puede apreciar, los resultados obtenidos con estos valores no se condicen con los esperados según lo expuesto en las bibliografías. Pero, si cambiamos el valor de $a = -8.5$, tenemos: 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/analisis2.png}
    \caption{Concentración de oxigeno disuelto en el seno del liquido.}
\end{figure}

Esta vez, los resultados obtenidos son más satisfactorios, pero no del todo precisos. Además, al variar las RPM deberíamos obtener una variación en el nivel de estabilización de la concentración de OD. Si pasamos de 2800 a 200 RPM.   

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/analisis3.png}
    \caption{Concentración de oxigeno disuelto en el seno del liquido.}
\end{figure}

Ahora si pasamos de 200 a 0.05 RPM si podemos notar un cambio en el valor de estabilización. 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/analisis4.png}
    \caption{Concentración de oxigeno disuelto en el seno del liquido.}
\end{figure}

En este análisis, se observa que, con los valores característicos, el comportamiento no es el esperado y se concluye que estamos en presencia de un sistema dinámico y multivariable, dependiente de las condiciones operativas de cada sistema en particular. Lo que nos lleva a dar de baja la formula \eqref{eqn:consentracionOD_FI_F}, pero nos permite observar los efectos que provoca el variar cada uno de ellos. Dentro de estos, se puede mencionar, cambios en el nivel y tiempo de estabilización, en la concentración inicial de OD del sistema y en el contenido mínimo de oxígeno.

Por último, lo más importante, se define el comportamiento del modelo matemático del sistema como una ecuación diferencial de primer orden y la concentración de oxígeno disuelto como una exponencial inversa.

\subsection{Solución al problema de adaptabilidad del modelo}

\label{anexo:solucionDeAdaptabilidad}

En relación con lo expuesto en el apartado anterior, el modelo matemático con valores característicos, tomados de la información suministrada y de la investigación, no arroja los resultados esperados que se describen en las diferentes bibliografías. Esto dificulta la implementación y ajuste del controlador. Con el fin de solucionar esta problemática, se desarrolla un programa en Python donde se simula el comportamiento del sistema, a partir de la implementación de un modelo matemático variable que recibe como dato de entrada las RPM y genera una salida de concentración de OD. Este se comunica con el programa del controlador principal, quien recibe los valores de la concentración de OD y genera una salida de control en RPM. Es decir, se cuenta con un programa que simula ser el sistema real, donde podemos ajustar su comportamiento y ensayar las pruebas necesarias del controlador. En el siguiente esquema se detalla la solución abordada:

\newpage

\begin{figure}[H]
    \centering
    \includegraphics[angle=90,scale=.40]{src/imagenes/sistema/esquemaSistemaLA.png}
    \caption{Esquema del Sistema de control y simulación}
\end{figure}

\newpage

Al abordar esta solución, se abre la posibilidad de ajustar la respuesta de la simulación al sistema real. Si se dispone de la gráfica de concentración de OD en función al tiempo, solo se requiere modificar los parámetros $k$, $T$ y $a$. 

\subsection{Modelo matemático adaptativo de la ASCE}

Modelo basado en la American Society of Civil Engineers (ASCE, A Standard for the Measurement of Oxygen Transfer in Clean Water, 2a, 1991) y la Environmental Protection Agency (EPA, 1999) de los Estados Unidos: A Standard for the Measurement of Oxygen Transfer in Clean Water.
En esta norma se propone un modelo simple para la transferencia de oxígeno, en el cual se cuantifica la tasa global de transferencia en términos del producto de un solo coeficiente y una única diferencia global de concentraciones como fuerza motriz. 

$$\frac{dC}{dt} = k_{o2} \cdot \Theta^{T} \cdot Q(t) \cdot (C_{sat} - C(t))$$

\begin{itemize}
    \item{$k_{o2} \cdot \Theta^{T} \cdot Q(t) $: coeficiente de transferencia de oxígeno.}
    \item{$k_{o2}$: parámetro de ajuste.}
    \item{$\cdot \Theta^{T}$: coeficiente dependiente de la temperatura.}
    \item {$Q(t)$: caudal de aire en función al tiempo.}
    \item {$C_{sat}$: concentración de saturación del oxígeno disuelto en el volumen del líquido a una temperatura T del agua y a una presión atmosférica de campo en $g/m^{3}$.}
    \item {$C(t)$: concentración de oxígeno disuelto en el seno del líquido para el agua residual aproximada en $g/m^{3}$.}
\end{itemize}

A efectos prácticos para una mejor adaptabilidad de la fórmula, se transforma la ecuación en:

$$\frac{dC}{dt} = k_{o2} \cdot Q \cdot (C_{sat} - C(t))$$

Para resolver la ecuación diferencial, pasamos al espacio de Laplace:

$$s \cdot C(s) - C(0) = k_{o2} \cdot Q \cdot C_{sat} - k_{o2} \cdot Q \cdot C(s)$$

$$s \cdot C(s) + k_{o2} \cdot Q \cdot C(s) = k_{o2} \cdot Q \cdot C_{sat} + C(0)$$

$$C(s) \cdot (s + k_{o2} \cdot Q) = k_{o2} \cdot Q \cdot C_{sat} + C(0)$$

$$C(s) = \frac{k_{o2} \cdot Q \cdot C_{sat} + C(0)}{s + k_{o2} \cdot Q}$$

\begin{itemize}
    \item{$C(0)$: concentración de OD al inicio de la aireación.}
\end{itemize}

Reescribiendo: 

\begin{equation}
    C(s) = \frac{k_{o2} \cdot Q \cdot C_{sat}}{s + k_{o2} \cdot Q} + \frac{C(0)}{s + k_{o2} \cdot Q}
    \label{eqn:COD}
\end{equation}

Considerando: 

$$\frac{C(0)}{s + k_{o2} \cdot Q} = \frac{a}{s}$$

$$\frac{k_{o2} \cdot Q \cdot C_{sat}}{s + k_{o2} \cdot Q} = \frac{k}{T \cdot s + 1}$$

Reemplazando en \eqref{eqn:COD} tenemos:

\begin{equation}
    C(s) = \frac{k}{T*s+1} + \frac{a}{s}
    \label{eqn:COD_F}
\end{equation}

La ecuación \eqref{eqn:COD_F} expresa la función de transferencia del sistema, adaptable según los parámetros a, T y k.  Esta fórmula es el cociente de la salida (concentración de oxígeno disuelto), sobre la entrada (caudal de aire o RPM). Es decir, al multiplicar ambos lados de la ecuación por la entrada en el espacio de Laplace y transformarla al espacio temporal, tendremos la concentración de oxígeno disuelto en función al tiempo. Es importante mencionar, que la función de entrada es suministrada por el controlador. Esta entrada debe tener la particularidad de ser tipo rampa, para suponer una referencia con variación continua en el tiempo.

\section{Control PID}

\label{anexo:controlPID}

Se plantea el uso de un controlador PID genérico, en el cual al variar algún parámetro de configuración, tenemos la posibilidad de adaptarlo.

Procedemos a analizar la ecuación de un control PID y a extraer parámetros configurables:

\begin{equation}
    o(t) = Kp \cdot e(t) + \frac{Kp}{Ti} \cdot \int e(t) \cdot dt + Kp \cdot Td \cdot \frac{de(t)}{dt}
    \label{eqn:controlador}
\end{equation}

En donde:

\begin{itemize}
    \item{$o(t)$: es la salida del controlador en función del tiempo.}
    \item{$Kp$: es la constante de proporcionalidad.}
    \item{$e(t)$: es el error del sistema en función del tiempo.}
    \item{$Ti$: es un factor de proporcionalidad ajustable que indica el tiempo de integración.}
    \item{$Td$: es la ganancia del control derivativo.}
\end{itemize}

Buscando facilitar la comprensión por parte del operario, se tienen las siguientes variables configurables:

\begin{itemize}
    \item{$SP$: Expresa la concentración de oxígeno disuelto a la que se estabiliza el sistema (set point).}
    \item{$Kp$: ganancia proporcional.}
    \item{$\frac{Kp}{Ti} = Ki$: ganancia integral. }
    \item{$Kp \cdot Td = Kd$: ganancia derivativa.}
\end{itemize}

En la parte integral, se busca definir $\int e(t) \cdot dt$ de forma tal que se puede codificar. Si nos basamos en lo expuesto por \cite{LRSN}, se puede aproximar el área bajo la curva, o mejor dicho la integral, por integración numérica. Ya sea por la regla de SIMPSON o la de los TRAPECIOS. 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.70]{src/imagenes/sistema/sumatoria.png}
    \caption{Integración numérica.}
\end{figure}

Por lo tanto: 

$$\int e(t) \cdot dt = \sum_{i=1}^{n} e(t_{i})$$

De igual manera, en la parte derivativa $\frac{de(t)}{dt}$ se tiene expresar de forma tal que sea codificable. Tomando como referencia lo expuesto en \cite{STW}, se puede definir la derivada, como la pendiente de la recta tangente: 

\begin{figure}[H]
    \centering
    \includegraphics[scale=.70]{src/imagenes/sistema/derivada.png}
    \caption{Derivada por definición.}
\end{figure}

Por lo tanto: 

$$\frac{de(t)}{dt} = \frac{e(t + h) - e(t)}{h}$$

Donde: 

\begin{itemize}
    \item{$OD$: valor de concentración de oxígeno disuelto.}
    \item{$e(t)$: error del sistema.}
    \item{$h$: intervalo de tiempo entre correcciones.}
\end{itemize}

De esta forma, reemplazando en \eqref{eqn:controlador} tenemos:

\begin{equation}
    o(t) = Kp \cdot e(t) + Ki \sum_{i=1}^{n} e(t_{i}) + Kd \frac{e(t + h) - e(t)}{h}
    \label{eqn:controlador_F}
\end{equation}

La formula \eqref{eqn:controlador_F} expresa el valor de la acción de control en RPM. 

\section{Cálculo de conductores}

\label{anexo:calculoConductores}

\subsection{Circuito de alimentación del motor}

En lo que respecta a los cálculos para determinación de la sección de los conductores, se realizan con base en lo expuesto por José García Trasancos en su libro, “INSTALACIONES, ELECTRICAS EN MEDIA, y BAJA TENSION”.

En este, se consideran tres criterios en el cálculo de la selección de los conductores:

\textbf{Calentamiento del conductor o criterio térmico:} La densidad de corriente en el conductor debe ser limitada para disminuir el calentamiento producido al circular la corriente eléctrica. Este criterio fija la máxima intensidad de corriente por el conductor.

\textbf{Caída de tensión en el conductor:} La caída de tensión (diferencia entre la tensión al principio y al final de la línea), se limita para evitar el efecto que la disminución de la tensión de utilización tiene sobre el funcionamiento de los receptores, los cuales deben estar conectados a la tensión nominal para su correcto funcionamiento.

\textbf{Capacidad del conductor para soportar la corriente de cortocircuito:} Debe limitarse la intensidad de corriente de cortocircuito, porque su valor muy elevado produce un excesivo calentamiento del conductor y puede originar que las fuerzas que tienden a separar o a juntar conductores próximos recorridos por esa corriente tomen un valor excesivo. Este criterio no se suele tener en cuenta para el cálculo de sección, porque se considera que la intensidad de corriente y el calentamiento producido no llegan a valores peligrosos antes de que actúen las protecciones contra cortocircuitos.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.6]{src/imagenes/sistema/motor.png}
    \caption{Características del motor.}
\end{figure}

\subsubsection{Calentamiento del conductor o criterio térmico}

Teniendo en cuenta que es una línea trifásica, que alimenta un motor de 75Hp:

$$I_{n} = \frac{P}{\sqrt{3} \cdot V \cdot cos{(\phi)}}$$

Suponiendo la peor condición de operación a una potencia del 100\%:

$$I_{n} = \frac{\frac{55000W}{0.927}}{\sqrt{3} \cdot 380V \cdot cos{(0.86)}} \approx 105A$$

\subsubsection{Selección del conductor}

La intensidad de corriente admisible por conductor para cables instalados en cañerías, embutidas o a la vista, en servicio permanente, será indicada en la Tabla 5.I. 

Esta Tabla está referida a una temperatura ambiente de 40 °C, 70 °C en el conductor y para tres cables instalados por caño. En condiciones de cortocircuito no deberá superar los 160 °C. Cuando la temperatura ambiente difiera de 40 °C, las intensidades máximas admisibles resultarán de las indicadas en la Tabla 5.I., multiplicadas por el factor de corrección por temperatura de la Tabla 5. II.

Si se colocan de 4 a 6 conductores activos en un mismo caño, los valores indicados en la Tabla 5.1. deberán multiplicarse por 0,8 y si se colocan de 7 a 9 conductores activos deberá multiplicarse por 0,7.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.58]{src/imagenes/sistema/tablaSeccionMotor.png}
\end{figure}

Como no se tiene datos sobre las instalaciones físicas de la industria, se supone una temperatura de 40 °C y 3 conductores activos. Por lo tanto, tenemos un factor de corrección de 1 y una corriente nominal que debe soportar el cable de 131.25 A.

Se selecciona un cable de $75mm^{2}$, considerando el factor de corrección tenemos una corriente máxima admisible de 148A.

Con un margen de seguridad de:

$$M_{seg} = \frac{(148A - 131.25A) \cdot 100}{148A} = 11.31\%$$

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/tablaSeccionMotor2.png}
\end{figure}

Identificación comercial del conductor:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/sistema/seccionMotor.png}
\end{figure}

\subsubsection{Verificación de la caída de tensión}

La verificación de la caída de tensión considera la diferencia de tensión entre los extremos del conductor, calculada con base en la corriente absorbida por todos los elementos conectados al mismo y susceptibles de funcionar simultáneamente. Se deberá cumplir que no supere la carga máxima admisible por la carga.

Se considera que para circuitos de fuerza motriz en régimen: 

$$\Delta U_{adm} = 5\%$$

$$\Delta U_{adm} = 380V \cdot 0.05 = 19V$$

Para el cálculo se aplica la siguiente formula:

$$\Delta U = \frac{L \cdot P}{c \cdot S \cdot V}$$

Despejamos la longitud:

$$L = \frac{\Delta U \cdot c \cdot S \cdot V}{P}$$

La longitud máxima del cable para estar dentro del margen de verificación por caída de tensión será:

$$L = \frac{19V \cdot 48.47 \frac{m}{\Omega \cdot mm^{2}} \cdot 75mm^{2} \cdot 380V}{59331.17W} = 442.37m$$

\subsection{Cables aislados y con envoltura de protección}

Para cables armados o no, formados con conductores de cobre, con aislación y envoltura de material plástico, se aplicarán las intensidades de corrientes admisibles de la tabla 5.III.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/sistema/tablaSeccionMotor3.png}
\end{figure}

Nuevamente, como no se tiene datos sobre las instalaciones físicas de la industria, se supone una temperatura de 40 °C. Por lo tanto, tenemos un factor de corrección de 1 y una corriente nominal que debe soportar el cable de 131.25 A.

Seleccionamos un cable tetrapolar de $50mm^{2}$.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.5]{src/imagenes/sistema/tablaSeccionMotor4.png}
\end{figure}

Aplicando el factor de corrección tenemos una $I_{adm} = 147A$.

Con un margen de seguridad de:

$$M_{seg} = \frac{(148A - 131.25A) \cdot 100}{147A} = 10.71\%$$

Identificación comercial del conductor:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/cable1.png}
\end{figure}

\subsubsection{Verificación de la caída de tensión}

De los cálculos anteriores tenemos que, para circuitos de fuerza motriz se considera:

Se considera que para circuitos de fuerza motriz en régimen: 

$$\Delta U_{adm} = 5\%$$

$$\Delta U_{adm} = 380V \cdot 0.05 = 19V$$

La longitud máxima del cable para estar dentro del margen de verificación por caída de tensión será:

$$L = \frac{19V \cdot 48.47 \frac{m}{\Omega \cdot mm^{2}} \cdot 50mm^{2} \cdot 380V}{59331.17W} = 295m$$

\subsection{Cable para variador de frecuencia}

Con el uso de variadores de frecuencia, se produce la emisión de ondas electromagnéticas de alta frecuencia. Se evita eligiendo los cables con blindaje apropiado, prensa cables apropiados y el blindaje adecuado de los tableros y motores. La fuga de ondas electromagnéticas en altas frecuencias se produce cuando quedan, aunque sea pequeños huecos en la pantalla.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/cable2.png}
\end{figure}

Para una tensión nominal de $I_{n} = 105A \cdot 1.25 = 131.25A$. Seleccionamos del catálogo:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/cable3.png}
\end{figure}

De una intensidad máxima admisible de $135A$. Con un margen de seguridad de:

$$M_{seg} = \frac{(135A - 131.25A) \cdot 100}{135A} = 2.77\%$$

\subsection{Filtro EMC (emisión electromagnética)}

Un filtro EMC es un elemento generalmente pasivo, de una o varias etapas, que permite atenuar el ruido de radiofrecuencia, tanto en modo diferencial como en modo común, en una determinada banda de frecuencias denominada banda de rechazo.

Estas emisiones de ruido en la línea de alimentación asociada con drives de frecuencia variable pueden causar disturbios en equipos cercanos.

Los disturbios típicos incluyen:

\begin{itemize}
    \item{Inestabilidad en dimmers y balastros.}
    \item{Disturbios en la iluminación tales como parpadeo.}
    \item{Radio recepción pobre.}
    \item{Inestabilidad en sistemas de control.}
    \item{Lazos comunes.}
    \item{Fluctuación en mediciones de flujo.}
    \item{Fallas en sistemas de cómputo.}
    \item{I/O Remoto.}
    \item{Retroalimentación de codificadores.}
    \item{Molestas fallas de PLC.}
    \item{Rebote de medidores análogos.}
    \item{Problemas con controles de termostatos.}
\end{itemize}

El dimensionamiento del filtro se realiza a partir de la potencia, tensión y corriente de funcionamiento del variador:

$$P_{n} = 55000W$$

$$V = 380V$$

$$I_{n} = 131.25A$$

El filtro que mejor se adapta a estas prestaciones es:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/emc.png}
\end{figure}

\subsection{Conectores relé-variador}

Estos conductores conectan la salida de 24 V de la fuente interna del variador a los pines de entrada de alimentación de los relés y la salida de estos a las entradas digitales del variador.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/cable4.png}
\end{figure}

Según la ficha técnica del variador de frecuencia, posee una fuente interna que suministra una tensión de $24V$ con una corriente máxima de $200mA$.

En la condición más desfavorable tenemos:

$$P = 24V \cdot 200 \cdot 10^{-3}A = 4.8W$$

Para el diseño del circuito se tiene en cuenta:

$$L_{max} = 1m$$

$$\Delta U_{adm} = 1V$$

Esto da como resultado:

$$S = \frac{P \cdot L}{\Delta U_{adm} \cdot c \cdot V}$$

$$c = 56 \frac{m}{\Omega \cdot mm^{2}}$$

$$S = \frac{4.8W \cdot 1m}{0.1V \cdot 56 \frac{m}{\Omega \cdot mm^{2}} \cdot 24V}$$

Seleccionamos un cable de:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/cable5.png}
\end{figure}

Verificamos el cumplimiento de la caída de tensión:

$$\Delta U_{adm} = \frac{1m \cdot 4.8W}{56 \frac{m}{\Omega \cdot mm^{2} \cdot 0.25mm^{2} \cdot 24V}}$$

\section{Dimensionamiento de protecciones}

\label{anexo:dimensionamientoDeProtecciones}

\subsection{Protección contra las sobrecargas (cerca del motor)}

Los motores utilizados en régimen continuo deben ser protegidos contra las sobrecargas por un dispositivo integrante del motor o por un dispositivo independiente.

Utilizamos un dispositivo independiente cuya corriente nominal o de ajuste es:

$$I_{se} \leq K_{1} \cdot I_{r}$$

Donde $K1$ es el factor que vale $1.25$, para motores con factor de servicio igual o superior a $1.15$ o con elevación de temperatura permisible igual o inferior a 40ºC, o 1.15, para los demás tipos de motores:

$$I_{se} \leq 105A \cdot 1.15 = 120.75A$$

Para un ajuste preciso de la corriente de disparo del relé térmico, se requiere medir la corriente nominal mediante ensayo del motor en funcionamiento. Y con base en eso, regular el valor correcto de la intensidad de la corriente.

Primera alternativa:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion1.png}
\end{figure}

Segunda alternativa:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion2.png}
\end{figure}

Con su correspondiente contactor:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion3.png}
\end{figure}

\subsection{Protección contra cortocircuito}

La protección de los motores contra los cortocircuitos debe efectuarse por los dispositivos de protección de los circuitos terminales.

La corriente nominal o de ajuste del dispositivo de protección del circuito, debe ser igual o inferior a los valores obtenidos de multiplicar la corriente a plena carga por los valores indicados en la Tabla 28.7, es decir:

$$I_{cc} \leq K_{2} \cdot I_{n}$$

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/proteccion4.png}
\end{figure}

$$I_{cc} \leq 1.75 \cdot 105A = 183.75A$$

Para un ajuste preciso de la corriente de disparo del interruptor, se requiere medir la corriente nominal mediante ensayo del motor en funcionamiento. Y con base en eso, regular el valor correcto de la intensidad $I_{cc}$.

Primera Alternativa:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion5.png}
\end{figure}

Segunda alternativa:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion6.png}
\end{figure}

\subsection{Contactor}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/proteccion7.png}
\end{figure}

\subsection{Fuente de alimentación 24VCC}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/fuente24v.png}
\end{figure}

Como se puede apreciar, el fabricante recomienda, como protección, la utilización de un interruptor magneto térmico de 16A con característica de disparo tipo B.

\subsection{Interruptor magnetotérmico para Fuente de alimentación}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/sistema/fuente24v2.png}
\end{figure}

\section{Configuración de la Raspberry Pi}

\label{anexo:configuracionDeLaRaspberry}

\subsection{Instalación del S.O.}

La Raspberry Pi utiliza Raspberry Pi OS, que es el sistema operativo oficial distribuido por el fabricante de las placas. Está basado en Debian y es compatible con todos los modelos de placas. La imagen de instalación se puede descargar desde la \href{https://www.raspberrypi.com/software/operating-systems/}{página oficial de Raspberry}.

Si bien es cierto que se pueden instalar otros sistemas operativos como Arch Linux ARM, Ubuntu, etc. En este caso preferimos usar Raspberry Pi OS por ser soportado oficialmente.

Para instalar el sistema en la Raspberry Pi, lo que debemos hacer es (una vez descargada la imagen) descomprimir el archivo .zip y grabar el archivo .img en una tarjeta micro SD de por lo menos 32 GB.

Cuando se termine de grabar el .img en la micro SD, ahora procedemos a crear un archivo llamado \textit{ssh} en la partición /boot, esto permitirá que desde el primer booteo el sistema inicie también el servidor ssh.

Y listo, ahora ya podemos extraer la tarjeta de memoria, colocarla en la Raspberry y conectarla a la corriente.

\subsection{Configuración el entorno de desarrollo}

Existen varios motivos por los cuales uno se encuentra con la necesidad de configurar un entorno de desarrollo personalizado:

\begin{itemize}
    \item{La versión que se distribuye con el sistema operativo no está actualizada.}
    \item{Es necesario un compilador cruzado para una arquitectura en específico.}
    \item{Las versiones precompiladas no están configuradas como se necesita.}
\end{itemize}

Nosotros vamos a crear aplicaciones Qt para la Raspberry Pi 3B+, y como las versiones modernas de GCC y de Qt no vienen compiladas por defecto para la arquitectura, hay que configurar un entorno personalizado.

Para crear un toolchain de C++ y Qt, tenemos que:

\begin{itemize}
    \item{Compilar la última versión del compilador (valga la redundancia) para nuestra máquina de escritorio (x86\_64).}
    \item{Compilar la última versión del compilador, pero de manera cruzada para la plataforma de destino. En este caso es la Raspberry Pi 3B+ (armv7).}
    \item{Compilar la versión de Qt para la plataforma de destino (Raspberry Pi 3B+ armv7).}
\end{itemize}

En resumen, lo que haremos es crear un compilador cruzado con las librerías de Qt instaladas. Y así poder generar binarios para la Raspberry Pi 3B+ desde nuestra computadora de escritorio. Que son dos arquitecturas completamente distintas.

Se puede realizar el desarrollo directamente en la Raspberry Pi, pero en nuestro caso no tiene sentido, puesto que es necesario que durante todo el proceso de programación y desarrollo la placa esté conectada y funcionando, viéndonos limitados por la potencia de cómputo al mover un entorno de escritorio completo.

El proceso paso a paso de la configuración es demasiado largo como para incluirlo aquí; sin embargo, tenemos un \href{https://github.com/GabiAndi/Build_toolchains}{repositorio en GitHub} en donde puede ver el desarrollo completo.

\section{Protocolo de comunicación}

\label{anexo:protocoloDeComunicacion}

El protocolo seguido es el siguiente:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| p{2.75cm} | p{6cm} | p{4cm} |}
            \hline
            \textbf{Dato} & \textbf{Descripción} & \textbf{Tipo de dato} \\ \hline
            \multicolumn{3}{| c |}{Cabecera} \\ \hline
            0x53 - 'S' & Caracter de cabecera 1 & byte sin signo \\ \hline
            0x43 - 'C' & Caracter de cabecera 2 & byte sin signo \\ \hline
            0x50 - 'P' & Caracter de cabecera 3 & byte sin signo \\ \hline
            0x41 - 'A' & Caracter de cabecera 4 & byte sin signo \\ \hline
            0x3A - ':' & Caracter de token & byte sin signo \\ \hline
            \multicolumn{3}{| c |}{Estructura del paquete} \\ \hline
            0xXX - 'LEN1' & Tamaño del paquete byte 1 & byte sin signo \\ \hline
            0xXX - 'LEN2' & Tamaño del paquete byte 2 & byte sin signo \\ \hline
            \multicolumn{3}{| c |}{Datos} \\ \hline
            0xXX - 'CMD' & Comando & byte sin signo \\ \hline
            0xXX - 'PAYL' & Contenido del comando & n bytes sin signo \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

Los comandos disponibles son:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| p{2cm} | p{3cm} | p{7cm} |}
            \hline
            \textbf{ID} & \textbf{Dirección} & \textbf{Paquete} \\ \hline
            \multicolumn{3}{| c |}{Comandos de datos} \\ \hline
            0x00 & HMI -> RPI & GET\_SENSOR \\ \hline
            0x01 & RPI -> HMI & REQUEST\_GET\_SENSOR \\ \hline
            0x10 & HMI -> RPI & SET\_SENSOR \\ \hline
            0x11 & RPI -> HMI & REQUEST\_SET\_SENSOR \\ \hline
            0x20 & HMI -> RPI & GET\_SYSTEM\_STATE \\ \hline
            0x21 & RPI -> HMI & REQUEST\_GET\_SYSTEM\_STATE \\ \hline
            0x30 & HMI -> RPI & SET\_SYSTEM\_STATE \\ \hline
            0x31 & RPI -> HMI & REQUEST\_SET\_SYSTEM\_STATE \\ \hline
            \multicolumn{3}{| c |}{Comandos de gestión} \\ \hline
            0xA0 & HMI -> RPI & KEEP\_ALIVE \\ \hline
            0xA0 & RPI -> HMI & KEEP\_ALIVE \\ \hline
            0xA1 & HMI -> RPI & LOGIN \\ \hline
            0xA2 & HMI -> RPI & FORCE\_LOGIN \\ \hline
            0xA3 & RPI -> HMI & LOGIN\_REQUEST \\ \hline
            0xA4 & RPI -> HMI & DISCONNECT\_CODE \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\subsubsection{Paquete GET\_SENSOR}

Este paquete pide al controlador que envíe el estado de los sensores:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Parámetro \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica de que sensor se quiere obtener la información.}
    \begin{itemize}
        \item{\textbf{Sensor de nivel de foso:} 0x00.}
        \item{\textbf{Sensor de nivel de lodo:} 0x01.}
        \item{\textbf{Sensor de temperatura:} 0x02.}
        \item{\textbf{Sensor de OD:} 0x03.}
        \item{\textbf{Sensor de nivel de PH en zona anóxica:} 0x04.}
        \item{\textbf{Sensor de nivel de PH en pileta de aireación:} 0x05.}
        \item{\textbf{Sensor de corriente del motor:} 0x10.}
        \item{\textbf{Sensor de voltaje del motor:} 0x11.}
        \item{\textbf{Sensor de temperatura del motor:} 0x12.}
        \item{\textbf{Sensor de velocidad del motor:} 0x13.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete REQUEST\_GET\_SENSOR}

Devolución del estado del sensor:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c | c |}
            \hline
            Parámetro & Valor \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica el sensor.}
    \begin{itemize}
        \item{\textbf{Sensor de nivel de foso:} 0x00.}
        \item{\textbf{Sensor de nivel de lodo:} 0x01.}
        \item{\textbf{Sensor de temperatura:} 0x02.}
        \item{\textbf{Sensor de OD:} 0x03.}
        \item{\textbf{Sensor de nivel de PH en zona anóxica:} 0x04.}
        \item{\textbf{Sensor de nivel de PH en pileta de aireación:} 0x05.}
        \item{\textbf{Sensor de corriente del motor:} 0x10.}
        \item{\textbf{Sensor de voltaje del motor:} 0x11.}
        \item{\textbf{Sensor de temperatura del motor:} 0x12.}
        \item{\textbf{Sensor de velocidad del motor:} 0x13.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete SET\_SENSOR}

Este paquete setea los valores de un sensor para la simulación en condiciones controladas:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c | c |}
            \hline
            Parámetro & Valor \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica la variable que se seteará.}
    \begin{itemize}
        \item{\textbf{Sensor de nivel de foso:} 0x00.}
        \item{\textbf{Sensor de nivel de lodo:} 0x01.}
        \item{\textbf{Sensor de temperatura:} 0x02.}
        \item{\textbf{Sensor de OD:} 0x03.}
        \item{\textbf{Sensor de nivel de PH en zona anóxica:} 0x04.}
        \item{\textbf{Sensor de nivel de PH en pileta de aireación:} 0x05.}
        \item{\textbf{Sensor de corriente del motor:} 0x10.}
        \item{\textbf{Sensor de voltaje del motor:} 0x11.}
        \item{\textbf{Sensor de temperatura del motor:} 0x12.}
        \item{\textbf{Sensor de velocidad del motor:} 0x13.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete REQUEST\_SET\_SENSOR}

Confirmación del seteo de las variables de los sensores:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Parámetro \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica la variable que se seteará.}
    \begin{itemize}
        \item{\textbf{Sensor de nivel de foso:} 0x00.}
        \item{\textbf{Sensor de nivel de lodo:} 0x01.}
        \item{\textbf{Sensor de temperatura:} 0x02.}
        \item{\textbf{Sensor de OD:} 0x03.}
        \item{\textbf{Sensor de nivel de PH en zona anóxica:} 0x04.}
        \item{\textbf{Sensor de nivel de PH en pileta de aireación:} 0x05.}
        \item{\textbf{Sensor de corriente del motor:} 0x10.}
        \item{\textbf{Sensor de voltaje del motor:} 0x11.}
        \item{\textbf{Sensor de temperatura del motor:} 0x12.}
        \item{\textbf{Sensor de velocidad del motor:} 0x13.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete GET\_SYSTEM\_STATE}

Este paquete pide al controlador que envíe el estado del sistema:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Parámetro \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica el parámetro del que se quiere obtener la información.}
    \begin{itemize}
        \item{\textbf{Estado del sistema de control:} 0x00.}
        \item{\textbf{Setpoint de OD:} 0x01.}
        \item{\textbf{Valor del error producido por el PID:} 0x02.}
        \item{\textbf{Valor de la constante de proporcionalidad del controlador PID:} 0x03.}
        \item{\textbf{Acción correctiva proporcional del controlador PID:} 0x04.}
        \item{\textbf{Valor de la constante de derivación del controlador PID:} 0x05.}
        \item{\textbf{Acción correctiva derivativa del controlador PID:} 0x06.}
        \item{\textbf{Valor de la constante de integración del controlador PID:} 0x07.}
        \item{\textbf{Acción correctiva integral del controlador PID:} 0x08.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete REQUEST\_GET\_SYSTEM\_STATE}

Devolución del estado del sistema:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c | c |}
            \hline
            Parámetro & Valor \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica el sensor.}
    \begin{itemize}
        \item{\textbf{Estado del sistema de control:} 0x00.}
        \item{\textbf{Setpoint de OD:} 0x01.}
        \item{\textbf{Valor del error producido por el PID:} 0x02.}
        \item{\textbf{Valor de la constante de proporcionalidad del controlador PID:} 0x03.}
        \item{\textbf{Acción correctiva proporcional del controlador PID:} 0x04.}
        \item{\textbf{Valor de la constante de derivación del controlador PID:} 0x05.}
        \item{\textbf{Acción correctiva derivativa del controlador PID:} 0x06.}
        \item{\textbf{Valor de la constante de integración del controlador PID:} 0x07.}
        \item{\textbf{Acción correctiva integral del controlador PID:} 0x08.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete SET\_SYSTEM\_STATE}

Este paquete setea los valores del sistema:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c | c |}
            \hline
            Parámetro & Valor \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica la variable que se seteará.}
    \begin{itemize}
        \item{\textbf{Estado del sistema de control:} 0x00.}
        \item{\textbf{Setpoint de OD:} 0x01.}
        \item{\textbf{Valor del error producido por el PID:} 0x02.}
        \item{\textbf{Valor de la constante de proporcionalidad del controlador PID:} 0x03.}
        \item{\textbf{Acción correctiva proporcional del controlador PID:} 0x04.}
        \item{\textbf{Valor de la constante de derivación del controlador PID:} 0x05.}
        \item{\textbf{Acción correctiva derivativa del controlador PID:} 0x06.}
        \item{\textbf{Valor de la constante de integración del controlador PID:} 0x07.}
        \item{\textbf{Acción correctiva integral del controlador PID:} 0x08.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete REQUEST\_SET\_SYSTEM\_STATE}

Confirmación del seteo de las variables del sistema:

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Parámetro \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Parámetro:} indica la variable que se seteará.}
    \begin{itemize}
        \item{\textbf{Estado del sistema de control:} 0x00.}
        \item{\textbf{Setpoint de OD:} 0x01.}
        \item{\textbf{Valor del error producido por el PID:} 0x02.}
        \item{\textbf{Valor de la constante de proporcionalidad del controlador PID:} 0x03.}
        \item{\textbf{Acción correctiva proporcional del controlador PID:} 0x04.}
        \item{\textbf{Valor de la constante de derivación del controlador PID:} 0x05.}
        \item{\textbf{Acción correctiva derivativa del controlador PID:} 0x06.}
        \item{\textbf{Valor de la constante de integración del controlador PID:} 0x07.}
        \item{\textbf{Acción correctiva integral del controlador PID:} 0x08.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete KEEP\_ALIVE}

Este paquete solo sirve para comprobar conexiones.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Modo  \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Modo:} tipo de paquete.}
    \begin{itemize}
        \item{\textbf{Petición:} 0x00.}
        \item{\textbf{Respuesta:} 0xFF.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete LOGIN}

Paquete que manda la información de autenticación del nuevo usuario a conectarse.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c | c | c | c |}
            \hline
            Tamaño usuario & Usuario & Tamaño contraseña & Contraseña \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Tamaño usuario:} tamaño del usuario, 1 byte.}
    \item{\textbf{Usuario:} nombre de usuario, hasta 256 bytes.}
    \item{\textbf{Tamaño contraseña:} tamaño de la contraseña, 1 byte.}
    \item{\textbf{Contraseña:} contraseña, hasta 256 bytes.}
\end{itemize}

\subsubsection{Paquete LOGIN\_REQUEST}

Respuesta de la petición de conexión.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Respuesta \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Respuesta:} resultado del login.}
    \begin{itemize}
        \item{\textbf{0x00:} login incorrecto, error de usuario o contraseña.}
        \item{\textbf{0xAA:} un usuario ya esta conectado.}
        \item{\textbf{0xFF:} login correcto.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete FORCE\_LOGIN}

Indica que se desea establecer la conexión actual como el usuario activo.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Confirmación \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Confirmación:} confirmación del login.}
    \begin{itemize}
        \item{\textbf{0x00:} no conectar.}
        \item{\textbf{0xFF:} conectar.}
    \end{itemize}
\end{itemize}

\subsubsection{Paquete DISCONNECT\_CODE}

Informa el motivo de la desconexión por parte del servidor.

\begin{table}[H]
    \begin{center}
        \begin{tabular}{| c |}
            \hline
            Código \\ \hline
        \end{tabular}
    \end{center}    
\end{table}

\begin{itemize}
    \item{\textbf{Código:} motivo de desconexión.}
    \begin{itemize}
        \item{\textbf{0x00:} timeout para el login.}
        \item{\textbf{0xFF:} se inicio sesión desde otro dispositivo.}
    \end{itemize}
\end{itemize}