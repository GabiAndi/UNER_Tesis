\chapter{Diseño e Ingeniería}

\pagestyle{empty}

\newpage

\pagestyle{fancy}

\section{Planificación}

Para poder llevar a cabo el desarrollo del proyecto debemos plantearnos una serie de objetivos en un tiempo determinado. Todo esto ayudará a definir las distintas etapas de investigación y desarrollo para lograr un orden y cumplir con los plazos de entrega.

\subsection{Metodología de trabajo (Design Thinkings)}

Para el desarrollo de este trabajo final se opto por llevar adelante el \textit{Design Thinkings}.

Design Thinkings es un método para generar ideas innovadoras que centra su eficacia en entender y dar solución a las necesidades reales de los usuarios. Proviene de la forma en la que trabajan los diseñadores de producto. De ahí su nombre, que en español se traduce de forma literal como \textit{Pensamiento de Diseño}.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{src/imagenes/metodologias/designThinkings.png}
\end{figure}

El Design Thinking se desarrolla siguiendo un proceso en el que se ponen en valor 5 características diferenciales:

\begin{itemize}
    \item{\textbf{La generación de empatía:} se debe entender los problemas, necesidades y deseos de los usuarios implicados en la solución que estamos buscando. Independientemente de lo qué se este desarrollando, siempre esta etapa conllevará la interacción con personas. Satisfacerlas es la clave de un resultado exitoso.}
    \item{\textbf{Los materiales:} serán las herramientas para promover la comunicación visual, que es fundamental en el método. Una imagen vale más que mil palabras, y puede evocar un sinfín de ideas, ya que da pie a la interpretación.}
    \item{\textbf{El equipo:} en el Design Thinking es imprescindible trabajar en equipo. Cuanto más diverso sea, mejor. Que haya al menos una persona con conocimientos sobre la metodología que sepa guiar el proceso. Y aunque debe tener un núcleo estable de personas que participen hasta el final, se podrán sumar otras dependiendo de la fase en la que se encuentre. Por ejemplo, en la generación de ideas o en la prueba de prototipos.}
    \item{\textbf{El espacio:} un espacio de trabajo apto para el proceso de desarrollo es fundamental.}
    \item{\textbf{La actitud:} es imprescindible la actitud. Se debe adoptar lo que se denomina \textit{Actitud del Diseñador}:}
        \begin{itemize}
            \item{Se debe ser empáticos, tanto con las personas como con sus circunstancias.}
            \item{Ser optimistas y positivos.}
            \item{Perder el miedo a equivocarse y ver los errores como oportunidades.}
        \end{itemize}
\end{itemize}

\subsection{Tareas a realizar}

El desarrollo de este proyecto se divide en 3 grandes etapas, en donde dos de ellas ocurren en paralelo: Diseño del sistema y Prototipado del sistema. A estas dos etapas combinadas se la denomina Desarrollo y validación del sistema, ya que es indispensable la elaboración de un prototipo para validar las ideas de diseño.

Por último tenemos la etapa de test y pruebas, que terminan de comprobar el buen funcionamiento de la estaba de diseño y desarrollo:

\begin{enumerate}
    \item{Desarrollo y validación del sistema:}
    \begin{enumerate}
        \item{Desarrollo del modelo del sistema.}
        \item{Diseño del hardware de control:}
        \begin{enumerate}
            \item{Actuadores de potencia.}
            \item{Electrónica del controlador.}
            \item{Electrónica transductora.}
            \item{Conexiones cableadas.}
        \end{enumerate}
        \item{Diseño del software de control:}
        \begin{enumerate}
            \item{Controlador.}
            \item{Pantallas de visualización y configuración.}
            \item{Simulación de la pileta.}
            \item{Infraestructura de red.}
            \item{Configuración del servidor de métricas.}
        \end{enumerate}
    \end{enumerate}
    \item{Pruebas y testeos:}
    \begin{enumerate}
        \item{Pruebas de conexionado.}
        \item{Pruebas de funcionamiento.}
        \item{Pruebas de gestión.}
        \item{Pruebas de software.}
    \end{enumerate}
\end{enumerate}

Todas las actividades son desarrolladas utilizando la metodología de Design Thinkings. Lo que implica que constantemente se estén realizando cambios en los diseños del sistema de control.

\subsection{Tiempos de desarrollo}

Llevar adelante el diseño completo de un proyecto de esta magnitud, demanda meses de desarrollo, más si tenemos en cuenta que lo realizan dos \textit{Ingenieros Junior} cuyo objetivo es mas académico que lucrativo. Se busca aplicar e integrar los conocimientos adquiridos, para generar una propuesta innovadora. Es por esto que consideramos los siguientes plazos:

{
    \newpage

    \thispagestyle{empty}

    \begin{landscape}
        \begin{figure}[H]
            \centering
            \includegraphics[scale=.45]{src/imagenes/ingenieria/lineaDeTiempo.png}
        \end{figure}
    \end{landscape}

    \newpage
}

Resumiendo el esquema, se estipula un tiempo de desarrollo de 10 meses aproximadamente, comenzando el 3 de mayo del 2021 y culminando el 25 de febrero del 2022.

\section{Diseño y validación del sistema}

De manera muy simplificada, se puede ver el sistema de control como la siguiente figura:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.55]{src/imagenes/ingenieria/controlador.png}
\end{figure}

\subsection{Modelado del sistema}

\subsubsection{Sistema de aireación}

El sistema de aireación está compuesto por las etapas de suministro, distribución y expulsión de aire. Podrá ver una descripción más detallada en el anexo \ref{anexo:caracteristicasDelSistema}.

El aporte de oxígeno es producido por un soplador de lóbulos rotativos de la marca \href{https://repicky.com.ar/site/}{Repicky}, accionando mediante un motor trifásico con variador, permitiendo regular el caudal de aire en función a la frecuencia. Al circular este caudal en el interior de una grilla de aireación, ubicada en la parte inferior de la pileta, se genera una presión en el sistema de distribución, provocando que el aire ingrese a la pileta y se transfiera al líquido.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.45]{src/imagenes/sistema/caracteristicasConstructivas.png}
    \caption{Sistema de suministro de aire.}
\end{figure}

Para distribuir el aire de manera uniforme a través de la pileta de aireación, la planta de tratamiento tiene una grilla de cañerías de diámetro más fino.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/diagramaRegillasInventor.png}
    \caption{Sistema de distribución de aire.}
\end{figure}

Por último, al llegar a los difusores (orificios pequeños en las cañerías), el aire forma burbujas que son expulsadas al líquido para producir la difusión del oxígeno al agua.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/tuberias2.png}
    \caption{Sistema de expulsión de aire.}
\end{figure}

Se realizó la simulación del sistema en \href{https://fluidflowinfo.com/}{FLUIDFLOW}, se pudo observar cómo cambia el caudal de ingreso de aire en función a la velocidad de operación del soplador (RPM), y como se distribuye el mismo en cada sección de cañería.

El objetivo principal del análisis era determinar qué frecuencia mínima del variador nos garantiza el ingreso de aire a la pileta de lodos activos (parámetro que es muy complejo para determinar de manera analítica). Sin embargo, los resultados que se obtuvieron no fueron concluyentes. Esto nos indica que el ajuste final del sistema se deberá efectuar de manera empírica con una serie de pruebas en condiciones controladas.

\subsubsection{Variables del sistema}

Actualmente la planta de tratamiento de efluentes esta sensando:

\begin{itemize}
    \item{Nivel de PH en la zona anóxica y en la pileta de aireación.}
    \item{Nivel de foso en la zona anóxica.}
    \item{Nivel de OD en la pileta de aireación.}
    \item{Temperatura en la zona de aireación (aunque este parámetro no se visualiza en el SCADA de la planta).}
\end{itemize}

Para que nuestro sistema de control pueda funcionar, es necesario disponer del nivel de OD, temperatura y PH de la pileta de aireación. Aunque para el servidor de métricas se capturen todas las variables anteriormente mencionadas.

Para más información acerca del OD y el sensor de OD, puede ver el anexo \ref{anexo:oxigenoDisuelto}.

\subsection{Controlador}

El controlador de la pileta de aireación, es quien captura las variables críticas del sistema y provoca una variación de frecuencia en los motores de los sopladores, produciendo así, un cambio en cantidad de oxígeno insuflado al agua.

Una consideración importante tiene que ver con la forma de conocer el valor de la DBO, que se realiza mediante ensayos de laboratorio. Sin embargo, aún se puede establecer manualmente una serie de parámetros en el proceso que estén controlados por el sistema, pero que se determinen de forma manual. Es decir, se genera un setpoint de concentración de oxígeno disuelto en función a los valores de DBO obtenidos en el análisis. Esto provoca que el sistema de control, consista en mantener una concentración de oxígeno disuelto (OD) constante igual al setpoint en función a los valores de OD arrojados por el sensor, independientemente de la temperatura y el flujo de entrada y salida.

Por otro lado, el tiempo de respuesta entre un cambio de caudal de aire estrangulado y el nivel de OD, es muy lento. Aproximadamente toma una hora o más para que haya una variación en el nivel del sensor. Esto plantea un sistema de control con un tiempo de respuesta muy lento.

\subsubsection{Aproximación del sistema}

Al no conocer con exactitud el modelo matemático del sistema, ni como este responde ante diferentes entradas, se aproximó una relación de variación del OD en función al caudal de aire de ingreso. Esta aproximación nos permitió el desarrollo de un controlador ajustable para distintos modos de operación. Puede leer más en anexo \ref{anexo:aproximacionDelSistema}.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.35]{src/imagenes/sistema/analisis4.png}
    \caption{Concentración de oxigeno disuelto en el seno del liquido.}
\end{figure}

\subsubsection{Controlador PID}

El controlador es el encargado de comparar la variable de proceso medida con un valor de referencia de entrada (set point), para determinar la desviación y producir una señal de control que reduzca ese error a un valor aproximado a cero. La manera en la cual el controlador ejecuta la señal de control, se denomina acción de control, es la cantidad dosificada de energía que afecta al sistema para producir la salida o la respuesta deseada. \\
En nuestro caso, el controlador detecta la señal de error, comparando el set point seteado en relación con el valor de OD. La acción de control, es generar una salida en valor de frecuencia al variador.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.38]{src/imagenes/sistema/pid.png}
    \caption{Diagrama de bloques del sistema.}
\end{figure}

En donde:

\begin{itemize}
    \item{$r(t)$: entrada de referencia.}
    \item{$e(t)$: señal de error.}
    \item{$v(t)$: variable regulada.}
    \item{$m(t)$: variable manipulada.}
    \item{$p(t)$: señal de perturbación.}
    \item{$y(t)$: variable controlada.}
    \item{$b(t)$: variable de retroalimentación como resultado de haber detectado la variable controlada por medio del sensor.}
\end{itemize}

Como en todo sistema de control, la salida de este, es la entrada al actuador, quien efectúa la acción de control. En nuestro caso en particular, el actuador es un variador de frecuencia controlado mediante sus entradas digitales, lo que genera que se tenga que considerar dos aspectos fundamentales.

El primero es la rampa de aceleración propia del variador. Para una salida del controlador en RPM, se debe convertir a un valor en frecuencia, que luego se transfiere al variador. La consideración de la rampa de aceleración del variador es indispensable para la simulación posterior.

El segundo, es la transferencia del valor en frecuencia al variador, como ya se mencionó se utilizan las 4 entradas digitales. Tenemos, entonces, $2^{4}=16$ estados posibles. Además, si consideramos que tenemos 60 Hz se generan saltos discretos de 4 Hz. Esto provoca, que se pierda precisión en el controlador. Si una acción de control cae en el intervalo no definido, se tiene que optar por aproximar al valor más cercano.

Como ecuación para el controlador utilizamos:

$$e(t) = Kp \cdot e(t) + Ki \sum_{i=1}^{n} e(t_{i}) + Kd \cdot \frac{e(t + h) - e(t)}{h}$$

El proceso para el cálculo de la ecuación que modela el controlador se encuentra en el anexo \ref{anexo:controlPID}.

\subsection{Diseño eléctrico}

En el diseño del circuito eléctrico, se considera una disposición para la conexión de los motores, en la cual tenemos un circuito de distribución principal al que se conecta el circuito terminal del motor:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.6]{src/imagenes/ingenieria/layout.png}
\end{figure}

\subsubsection{Diseño de la instalación}

Para el diseño de la etapa de potencia del sistema de control, se tienen en cuenta los siguientes aspectos:

\begin{itemize}
    \item{Los contactos entre el motor y el variador deben estar cerrados antes de ejecutar una orden de marcha.}
    \item{La etapa de potencia debe estar desactivada cuando los contactos entre el motor y el variador estén abiertos.}
    \item{El circuito debe activar el arranque directo del motor y desactivar el contacto del variador ante una eventual falla del sistema. Manual con selector.}
    \item{Debe garantizar que nunca se pueda activar ambos contactores de los motores. Un solo motor puede operar.}
    \item{Cuando se presenten fallas, los contactores deben desactivarse. }
\end{itemize}

Los planos y los esquemas finales se encuentran en el anexo \ref{anexo:planosElectricos}. Además, el cálculo de conductores está en el anexo \ref{anexo:calculoConductores}, y el de protecciones en el anexo \ref{anexo:dimensionamientoDeProtecciones}.

\subsection{Diseño electrónico}

Esta etapa es la más importante. En ella se encuentra el hardware de control conformado por una Raspberry Pi 3 B+ y electrónica transductora que se encarga de convertir los tipos de señales. Dado que los sistemas de potencia industriales operan de manera estandarizada, nuestro controlador debe ajustarse para respetar dichos estándares.

La microcomputadora que opera en el sistema es la \href{https://www.raspberrypi.org/}{Raspberry Pi 3B+}. Esta microcomputadora de bajo consumo, posee pines de entrada y salida que operan con una lógica de 3.3 V. Por lo que es necesario realizar una separación de entre el voltaje de operación estándar (24 V) y el voltaje de la electrónica de la placa, además de estar aislados galvánicamente.

La microcomputadora es la encargada de procesar los datos de los sensores y enviar una respuesta al variador de frecuencia, para así poder controlar la velocidad de los sopladores. Además, se encarga de almacenar y enviar los datos de telemetría de todo el proceso al servidor de métricas, para así poder visualizar la información en tiempo real o en un futuro efectuar un análisis detallado.

Los planos, los esquemas y el ensamble 3D se encuentran en el anexo \ref{anexo:planosElectronicos}.

\subsection{Diseño de software}

Los software desarrollados por nosotros y que intervienen en el sistema están en los siguientes repositorios de GitHub:

\begin{itemize}
    \item{\href{https://github.com/GabiAndi/UNER_Tesis_Controlador_SCPA}{\textbf{SCPA:}} o Software Controlador de la Planta de Aireación, es ejecutado por la microcomputadora y es el encargado de generar una salida para el variador de frecuencia en función a la acción correctiva adoptada por el PID, de capturar los datos provenientes de los sensores, de transmitir la telemetría al servidor de métricas y de proporcionar una API de configuración del sistema.}
    \item{\href{https://github.com/GabiAndi/UNER_Tesis_GUI_SCPA}{\textbf{GUI:}} o Interfaz de Operación, proporciona un acceso visual al estado de la planta y permite configurar los parámetros del controlador del sistema.}
    \item{\href{https://github.com/GabiAndi/UNER_Tesis_HMIProtocol}{\textbf{Protocolo de comunicación:}} es el protocolo adoptado para la comunicación entre el \textit{SCPA} y la \textit{GUI}.}
    \item{\href{https://github.com/GabiAndi/UNER_Tesis_SCPA}{\textbf{SIMOD:}} es un script de Python encargado de simular el comportamiento de la planta de tratamiento de efluentes.}
\end{itemize}

Exceptuando a \textit{SIMOD}, el resto de los programas fueron desarrollados con el Framework de Qt, que es multiplataforma y además está escrito en C++ que es un lenguaje de sistemas.

La configuración de la Raspberry Pi y el entorno de desarrollo se encuentra en el anexo \ref{anexo:configuracionDeLaRaspberry}.

\subsubsection{Controlador del sistema}

El programa que proporciona el control del sistema de aireación se desarrolló pensando en separar en distintos hilos de ejecución las distintas partes de código que realicen tareas independientes y posean alguna acción bloqueante. Esto proporciona una mejor respuesta ante fallas inesperadas, como lo pueden ser el bloqueo de alguna tarea de comunicación o la captura de datos por consola.

El \textit{SCPA} posee la siguiente estructura de clases:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.4]{src/imagenes/ingenieria/softwareSCPA.png}
    \caption{Diagrama de clases simplificado.}
\end{figure}

En donde:

\begin{itemize}
    \item{\textbf{SCPAManager:} es la clase principal del programa, en donde se crean todos los hilos de ejecución para las tareas correspondientes y se administran los recursos de memoria.}
    \item{\textbf{TUIManager:} viene de Text User Interface, y como su nombre lo indica, proporciona una interfaz de control de consola que es solamente accesible por el S.O. de la microcomputadora. Permite la configuración con privilegios administrativos de todo el sistema.}
    \item{\textbf{ControlManager:} es la clase encargada de realizar el control PID y de enviar la salida del mismo al variador de frecuencia.}
    \item{\textbf{HMIServerManager:} proporciona un servicio de panel administrativo vía TCP/IP por el puerto 33600.}
    \item{\textbf{MetricsManager:} clase que administra todas las métricas del sistema y las envía a las distintas bases de datos que corre el servidor de métricas.}
\end{itemize}

\textbf{En azul} se encuentra el punto de entrada de la aplicación, \textbf{en verde} la clase principal, \textbf{en amarillo} los distintos hilos de ejecución, \textbf{en rojo} los eventos bloqueantes y \textbf{en morado} los logsfiles. Los logfiles son archivos que el programa escribe indicando la ocurrencia de algún evento de posible interés por un administrador.

\subsubsection{Interfaz de operación}

Proporciona una interfaz de administración y monitorización fácil de utilizar, permite al operario la configuración de los parámetros del proceso desde prácticamente cualquier dispositivo conectado a internet.

La idea de la interfaz de usuario es que proporcione una ayuda visual para el operario a cargo del control del sistema, más allá de la manipulación de los parámetros de control y la visualización de la planta. Debe permitir el ajuste del controlador PID de la manera más intuitiva posible.

Dentro de las medidas de seguridad se contempla lo siguiente:

\begin{itemize}
    \item{No permitir que el operario establezca una configuración que podría dañar al sistema eléctrico o mecánico.}
    \item{Proporcionar el acceso a operarios que estén dados de alta (sistema de usuarios).}
    \item{Proporcionar acceso al sistema operativo al administrador o encargado experto (esta persona tiene que conocer a la perfección el sistema, puesto que cualquier acción podría comprometer por completo a todo el equipo).}
    \item{Todo dato que se envíe hacia afuera de la industria deberá pasar por la VPN.}
    \item{Para cualquier tipo de administración directa se realizará mediante SSH y contará con un par de llaves cifradas únicas.}
\end{itemize}

Debido a que estamos en presencia de un proceso cuyas variables reaccionan de manera muy lenta, el controlador del sistema funciona de la siguiente manera:

\begin{enumerate}
    \item{Se leen los sensores cada 60 segundos.}
    \item{El controlador realiza el cálculo de la acción correctiva cada 2 horas, ya que para poder detectar un cambio en la pileta de aireación debe pasar como mínimo una hora y media.}
    \item{La rampa de aceleración y desaceleración de los sopladores es bastante lenta. Transcurren 20 min entre el valor mínimo (detenido) y el máximo. Esto es necesario para evitar golpes de ariete y cambios bruscos en la presión a la que se someten las tuberías de distribución.}
    \item{Las métricas del controlador se envían con cada lectura de los sensores. Condición necesaria para tener disponibilidad inmediata de los datos.}
\end{enumerate}

El controlador PID no es capaz de ejercer una acción correctiva continua, debido a las características del propio sistema (saltos en frecuencia, limitaciones de aceleración, tiempos de respuesta muy lentos, etc.).

\subsubsection{Protocolo de comunicación}

Para que el controlador pueda realizar su trabajo y logre interactuar con los sistemas subyacentes, es necesario una convención en cuanto a la transmisión y recepción de datos. Esto se debe a que los dispositivos pertenecientes al sistema actual interactúan de manera diferente y utilizan sus propios protocolos de comunicación.

La comunicación se efectúa mediante el protocolo TCP/IP por puerto 33600 y se incorporó un conjunto de comandos personalizado. Todo este desarrollo se encuentra en anexo \ref{anexo:protocoloDeComunicacion}.

\subsubsection{Simulación del modelo matemático}

Para poder realizar pruebas del sistema de control, es necesario simular la planta de tratamiento de efluentes. Es por ello que todo el modelo matemático y los datos de velocidad de respuesta del sensor OD son cargador en un script de Python.

El script está encargado de obtener en tiempo real la ecuación del sistema. Dicho script genera una salida de OD en función a una entrada rampa, que es la aceleración de rpm producida por el variador de velocidad. Puede consultar el anexo \ref{anexo:solucionDeAdaptabilidad}.

El esquema completo queda de la siguiente manera:

{
    \newpage

    \thispagestyle{empty}

    \begin{landscape}
        \vspace*{\fill}

        \begin{figure}[H]
            \centering
            \includegraphics[scale=.40]{src/imagenes/sistema/esquemaSistemaLA.png}
        \end{figure}

        \vspace*{\fill}
    \end{landscape}

    \newpage
}

\subsection{Validación del sistema}

\subsubsection{Limitaciones}

Ya que realizar pruebas directamente en un sistema en funcionamiento es complicado, y construir una pileta de aireación no es una opción, el prototipo fue creado para mostrar las generalidades de funcionamiento de la planta y enfocarse más en el trabajo del sistema de control, la captura de métricas y la gestión del software.

Con esto se pretende proporcionar la infraestructura para realizar las pruebas necesarias que permitan validar las ideas de diseño.

\subsubsection{Componentes}

El prototipo se construyó en la Planta Piloto de la Facultad de Ciencias de Alimentación, utilizando los siguientes componentes:

\begin{itemize}
    \item{Un variador de velocidad de 2 kW Micromaster 440 de la marca SIEMENS.}
    \item{Un motor de 1.1 kW.}
    \item{Una Raspberry Pi 3B+.}
    \item{Un módulo de 4 relés.}
    \item{Un módulo de 1 relé.}
    \item{Cables DuPont para las conexiones.}
    \item{Una pantalla táctil de 4 pulgadas con resolución 800x600.}
    \item{Una computadora de escritorio con mouse y teclado corriendo Debian 11.}
\end{itemize}

\subsubsection{Diseño eléctrico}

Los planos eléctricos del prototipo se encuentran en el anexo \ref{anexo:planosElectricosPrototipo}.

El variador de velocidad requiere una configuración determinada para poder funcionar mediante entradas digitales. Además, estas entradas digitales deben tener los saltos de frecuencia calculados de $4 Hz$. Para poder realizar esta configuración se realizó el siguiente procedimiento con los parámetros del Micromaster 440.

\begin{figure}[H]
    \centering
    \includegraphics[angle=-90,scale=.08]{src/imagenes/prototipo/variador.jpg}
    \caption{Variador de velocidad.}
\end{figure}

{
    \newpage

    \thispagestyle{empty}

    \begin{figure}[H]
        \centering
        \includegraphics[scale=.44]{src/imagenes/prototipo/variadorConfiguracion.png}
        \caption{Configuración del variador.}
    \end{figure}

    \newpage
}

El motor trifásico se encuentra conectado en estrella y es alimentado directamente por el variador de frecuencia:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.06]{src/imagenes/prototipo/motor1.jpg}
    \includegraphics[angle=-180,scale=.06]{src/imagenes/prototipo/motor2.jpg}
    \caption{Motor trifásico.}
\end{figure}

\subsubsection{Sistema de control}

El sistema de control que incorpora el prototipo es el mismo que el desarrollo para el sistema a gran escala. La única diferencia es que no se ensamblaron los componentes en una PCB:

\begin{figure}[H]
    \centering
    \includegraphics[scale=.04]{src/imagenes/prototipo/sistemaDeControl1.jpg}
    \includegraphics[scale=.05]{src/imagenes/prototipo/sistemaDeControl2.jpg}
    \includegraphics[scale=.05]{src/imagenes/prototipo/sistemaDeControl3.jpg}
    \includegraphics[scale=.05]{src/imagenes/prototipo/sistemaDeControl4.jpg}
    \includegraphics[scale=.06]{src/imagenes/prototipo/sistemaDeControl5.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/sistemaDeControl6.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/sistemaDeControl7.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/sistemaDeControl8.jpg}
    \caption{Sistema de control.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.04]{src/imagenes/prototipo/software1.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/software2.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/software3.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/software4.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/software5.jpg}
    \includegraphics[scale=.04]{src/imagenes/prototipo/software6.jpg}
    \caption{Software de gestión, simulación y visualización de métricas.}
\end{figure}

\subsection{Presupuestos}

\subsubsection{Prototipo}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|c|c|c|}
                    \hline
                    \multicolumn{6}{|c|}{\textbf{Listado de componentes de potencia}} \\ \hline
                    \multicolumn{2}{|c|}{\multirow{2}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca & Fecha: & 21/04/2022 \\
                    \multicolumn{2}{|c|}{} & Revision: & 1 & & \\ \hline
                    \multicolumn{6}{|c|}{Materiales e insumos} \\ \hline
                    Descripción & Cantidad & Precio unitario & Subtotal & Subtotal USD & Enlace \\ \hline
                    Variador de velocidad ATV630D75N4 & 1 & \$1355096,4 & \$1.355.096,40 & \$12.043,16 & \href{https://ar.mouser.com/ProductDetail/Schneider-Electric/ATV630D75N4?qs=VTAFTc7iVisoUqGEvY%2F1IQ%3D%3D}{Link} \\ \hline
                    &&&&& \\ \hline
                    \textbf{Total} &&& \textbf{\$62.310,24} & \textbf{\$553,77} & \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|c|c|c|}
                    \hline
                    \multicolumn{6}{|c|}{\textbf{Listado de componentes de electrónica}} \\ \hline
                    \multicolumn{2}{|c|}{\multirow{2}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca & Fecha: & 21/04/2022 \\
                    \multicolumn{2}{|c|}{} & Revision: & 1 & & \\ \hline
                    \multicolumn{6}{|c|}{Materiales e insumos} \\ \hline
                    Descripción & Cantidad & Precio unitario & Subtotal & Subtotal USD & Enlace \\ \hline
                    Lcd Touch 7in & 1 & \$9.809 & \$9.809 & \$473,14 & \href{https://articulo.mercadolibre.com.ar/MLA-818232434-lcd-touch-7-hdmi-raspberry-pi-pantalla-tactil-beaglebone-_JM
                    }{Link} \\ \hline
                    Kit Raspberry Pi 3 B+ & 1 & \$9.000 & \$9.000 & \$79,99 & \href{https://articulo.mercadolibre.com.ar/MLA-722769035-raspberry-pi-3-b-plus-kit-32gb-fuente-gab-dis-sandisk-98x-_JM
                    }{Link} \\ \hline
                    Modulo Relay Rele De 8 Canales 5v & 1 & \$907 & \$907 & \$8,06 & \href{https://compras.patagoniatec.com/productos/modulo-de-relee-relay-opto-8-canales-5v-10a-arduino-pic-ptec/
                    }{Link} \\ \hline
                    Kit 40 Cables Dupont 30cm Macho Macho & 1 & \$230 & \$230 & \$2,04 & \href{https://compras.patagoniatec.com/productos/kit-40-cables-dupont-30cm-macho-macho/
                    }{Link} \\ \hline
                    Kit 40 Cables Dupont 30cm Hembra Hembra & 1 & \$220 & \$220 & \$1,96 & \href{https://compras.patagoniatec.com/productos/kit-40-cables-dupont-30cm-hembra-hembra/
                    }{Link} \\ \hline
                    Kit Tubo Termocontraible 328 Unidades & 1 & \$1.200 & \$1.200 & \$10,66 & \href{https://compras.patagoniatec.com/productos/kit-tubo-termocontraible-heat-shrink-328-unidades/
                    }{Link} \\ \hline
                    Costos de envio & 2 & \$800 & \$1.600 & \$14,22 & \href{https://compras.patagoniatec.com/productos/kit-tubo-termocontraible-heat-shrink-328-unidades/
                    }{Link} \\ \hline
                    &&&&& \\ \hline
                    \textbf{Total} &&& \textbf{\$22.966} & \textbf{\$204,11} & \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

\subsubsection{Sistema final}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|c|c|c|}
                    \hline
                    \multicolumn{6}{|c|}{\textbf{Listado de componentes de potencia}} \\ \hline
                    \multicolumn{2}{|c|}{\multirow{2}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca & Fecha: & 21/04/2022 \\
                    \multicolumn{2}{|c|}{} & Revision: & 1 & & \\ \hline
                    \multicolumn{6}{|c|}{Materiales e insumos} \\ \hline
                    Descripción & Cantidad & Precio unitario & Subtotal & Subtotal USD & Enlace \\ \hline
                    Variador de velocidad ATV630D75N4 & 1 & \$1355096,4 & \$1.355.096,40 & \$12.043,16 & \href{https://ar.mouser.com/ProductDetail/Schneider-Electric/ATV630D75N4?qs=VTAFTc7iVisoUqGEvY%2F1IQ%3D%3D}{Link} \\ \hline
                    Cables CU/PVC FLEX 1X 70MM2 x 30m & 4 & \$61.452,00 & \$245.808,00 & \$2.184,57 & \href{https://www.ingenieriaboggio.com.ar/shop/product/125260-cable-cu-pvc-flex-1x-70mm2-negro-185223#attr=23969,23970,23971,23972,23973,23974}{Link} \\ \hline
                    Filtro EMC Input Filter 200A & 1 & \$54.800,40 & \$54.800,40 & \$487,03 & \href{https://ar.mouser.com/ProductDetail/Schneider-Electric/VW3A4708?qs=YCa%2FAAYMW03NmkBp%252BajfqQ%3D%3D}{Link} \\ \hline
                    Cables unipolar 6 Colores x 10m & 1 & \$1.639,00 & \$1.639,00 & \$14,57 & \href{https://articulo.mercadolibre.com.ar/MLA-856009578-cable-unipolar-025mm-6-colores-10-metros-de-cada-uno-_JM?matt_tool=14065579&matt_word=&matt_source=google&matt_campaign_id=14508409190&matt_ad_group_id=124055975182&matt_match_type=&matt_network=g&matt_device=c&matt_creative=543394189895&matt_keyword=&matt_ad_position=&matt_ad_type=pla&matt_merchant_id=131288106&matt_product_id=MLA856009578&matt_product_partition_id=1427499882874&matt_target_id=aud-1250848972453:pla-1427499882874&gclid=Cj0KCQjwgYSTBhDKARIsAB8KukuPr_vO5Ffd5m6K2IcNYiUWn40U5lN2HejytowyrWt9C9rDyTmVOKoaAkGsEALw_wcB}{Link} \\ \hline
                    Relé de sobrecarga electrónico & 1 & \$49.098,22 & \$49.098,22 & \$436,35 & \href{https://www.pelba.com.ar/productos/industria/reles-industriales/rele-de-sobrecarga-electronicos-3rb2056-1fw2/}{Link} \\ \hline
                    Interruptor de protección electrónico 250A & 1 & \$168.594,04 & \$168.594,04 & \$1.498,35 & \href{https://www.pelba.com.ar/productos/industria/aparatos-de-maniobra/interruptor-de-proteccion-electronico-250-a-3va2225-5hl42-0aa0/?removed_item=1}{Link} \\ \hline
                    Contactor 146A 75KW BOB 24VCC 1NA+1NC & 6 & \$106.360,42 & \$638.162,52 & \$5.671,55 & \href{https://www.ingenieriaboggio.com.ar/shop/product/94778-contactor-146a-75kw-ac3-bob-24vca-24vcc-48vca-48vcc-1na-1nc-af146-30-11-11-256034?search=Contactor+75kw+BOB+24VCC+#attr=}{Link} \\ \hline
                    Selector 3 POS fijas 45° 2NA & 2 & \$1.423,90 & \$2.847,80 & \$25,31 & \href{https://www.ingenieriaboggio.com.ar/shop/product/csw-ck3f45-20-3vf-selector-negro-3-pos-fijas-45o-2na-corta-ip66-completo-csw-ck3f45-20-3vf-245906?search=Selector+3+POS+#attr=}{Link} \\ \hline
                    Led ojo de buey 24VCC & 3 & \$382,90 & \$1.148,70 & \$10,21 & \href{https://www.ingenieriaboggio.com.ar/shop/product/4050114-ojo-de-buey-c-led-24vca-24vcc-verde-kpl-v-238483#attr=}{Link} \\ \hline
                    Parada Emergencia 1NC-1NA & 1 & \$4.610,40 & \$4.610,40 & \$40,97 & \href{https://ar.mouser.com/ProductDetail/TE-Connectivity-Alcoswitch/2381881-2?qs=sGAEpiMZZMsqIr59i2oRck%2FaWMJWh8brOjMy1vkp1eg%3D}{Link} \\ \hline
                    FUENTE 120/230VCA/24VCC 2.5A & 1 & \$20.616,37 & \$20.616,37 & \$183,22 & \href{https://www.ingenieriaboggio.com.ar/shop/product/100199786-fuente-de-alim-sitop-psu100c-120-230vca-24vcc-2-5a-234646#attr=}{Link} \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|c|c|c|}
                    \hline
                    Termomagnetica Bipolar 16A SIEMENS & 1 & \$1.487,83 & \$1.487,83 & \$13,22 & \href{https://www.pelba.com.ar/productos/productos-para-instalaciones/termicas-disyuntores-y-contactores/termicas/termomagnetica-bipolar-16a-5sl3216-6mb/?removed_item=1}{Link} \\ \hline
                    Cable para variador Marlew BX 3x50 & 10 & \$6.817,93 & \$68.179,30 & \$605,93 & \href{https://cablesonline.com.ar/producto/cable-vdf-para-variador-de-frecuencia-marlew-bx-3x50-mm2-11-kv-xlpe-pvc-blindaje-doble-de-cobre-norma-iram-2178/}{Link} \\ \hline
                    &&&&& \\ \hline
                    \textbf{Total} &&& \textbf{\$2.612.088,98} & \textbf{\$23.214,44} & \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|c|c|c|}
                    \hline
                    \multicolumn{6}{|c|}{\textbf{Listado de componentes de electrónica}} \\ \hline
                    \multicolumn{2}{|c|}{\multirow{2}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca & Fecha: & 21/04/2022 \\
                    \multicolumn{2}{|c|}{} & Revision: & 1 & & \\ \hline
                    \multicolumn{6}{|c|}{Materiales e insumos} \\ \hline
                    Descripción & Cantidad & Precio unitario & Subtotal & Subtotal USD & Enlace \\ \hline
                    Kit Raspberry Pi4 B & 1 & \$53.238 & \$53.238 & \$473,14 & \href{https://articulo.mercadolibre.com.ar/MLA-1100165149-kit-raspberry-pi4-b-4gb-fuente-disipador-gab-mem-16gb-_JM#position=6&search_layout=grid&type=item&tracking_id=1b627038-9d18-4958-ad73-9ff93ce6402f}{Link} \\ \hline
                    M20-9762042 & 1 & \$181,20 & \$181,20 & \$1,61 & \href{https://ar.mouser.com/ProductDetail/Harwin/M20-9762042?qs=sGAEpiMZZMvlX3nhDDO4AEmvugvXZ4tuK8%2FbdDZ4i9Y%3D}{Link} \\ \hline
                    895-1C-C-24VDC & 1 & \$216,00 & \$216,00 & \$1,92 & \href{https://ar.mouser.com/ProductDetail/Song-Chuan/895-1C-C-24VDC?qs=XIHh3mCH3ZkfX5Ha9s5H0A%3D%3D}{Link} \\ \hline
                    PC817X3NSZ9F & 10 & \$29,76 & \$29,76 & \$2,64 & \href{https://ar.mouser.com/ProductDetail/Sharp-Microelectronics/PC817X3NSZ9F?qs=rrS6PyfT74dWYZr%252B0rlaOw%3D%3D}{Link} \\ \hline
                    RESISTENCIA 1K OHMS 1/4W & 10 & \$0,2 & \$2,00 & \$0,02 & \href{https://tostatronic.com/store/componentes-pasivos/887-resistencia-1k-ohms-14w.html}{Link} \\ \hline
                    RESISTENCIA 20K OHMS 1/4W & 10 & \$0,5 & \$5,00 & \$0,04 & \href{https://tostatronic.com/store/electronica/1440-resistencia-20k-ohms-14w.html}{Link} \\ \hline
                    Resistencia 220 1/4w & 10 & \$0,5 & \$5,00 & \$0,04 & \href{https://tostatronic.com/store/componentes-pasivos/889-resistencia-220-14w.html}{Link} \\ \hline
                    Conector Tipo Wago 3 Pines Entradas & 4 & \$304,26 & \$1.217,04 & \$10,82 & \href{https://articulo.mercadolibre.com.ar/MLA-1104134332-bornera-terminal-conector-tipo-wago-3-pines-entradas-ptec-_JM?quantity=4}{Link} \\ \hline
                    Costo de fabricación de PCB & 5 &&  \$7.148,40 & \$63.53 & \href{https://jlcpcb.com/}{Link} \\ \hline
                    &&&&& \\ \hline
                    \textbf{Total} &&& \textbf{\$62.310,24} & \textbf{\$553,77} & \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

\subsubsection{Costos totales}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|}
                    \hline
                    \multicolumn{3}{|c|}{\textbf{Costos de desarrollo}} \\ \hline
                    \multirow{3}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca \\
                    & Fecha: & 21/04/2022 \\
                    & Revision: & 1 \\ \hline
                    \multicolumn{3}{|c|}{Tareas de desarrollo} \\ \hline
                    Descripción & Horas & Subtotal \\ \hline
                    Costo de desarrollo por mes (8 total) & 120 & \$125.984 \\ \hline
                    Pruebas y ensayos & 160 & \$320.000 \\ \hline
                    Instalación y configuración & 80 & \$260.000 \\ \hline
                    && \\ \hline
                    \textbf{Total} & \textbf{1.200} & \textbf{\$2.595.744} \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}
}

{
    \newpage

    \begin{landscape}
        \thispagestyle{empty}

        \def\arraystretch{1.9}

        \begin{table}[H]
            \footnotesize
            \begin{center}
                \begin{tabular}{|c|c|c|}
                    \hline
                    \multicolumn{3}{|c|}{\textbf{Total de la inversión}} \\ \hline
                    \multirow{3}{*}{\includegraphics[scale=0.16]{src/imagenes/doc/Logo.png}} & Responsables del proyecto: & Gabriel Aguirre - Lovatto Gianluca \\
                    & Fecha: & 21/04/2022 \\
                    & Revision: & 1 \\ \hline
                    \multicolumn{3}{|c|}{Costos totales} \\ \hline
                    Descripción & Subtotal & Subtotal (USD) \\ \hline
                    Materiales del sistema & \$2.674.399,22 & \$23.768,21 \\ \hline
                    Materiales del prototipo & \$2.674.399,22 & \$23.768,21 \\ \hline
                    Costos de desarrollo & \$2.595.744,00 & \$23.069,18 \\ \hline
                    && \\ \hline
                    \textbf{Total} & \textbf{\$4.774.399,22} & \textbf{\$42.431,56} \\ \hline
                \end{tabular}
            \end{center}
        \end{table}
    \end{landscape}

    \newpage
}

Los costos de desarrollo se tomaron con el criterio de un sueldo promedio de un Ingeniero Junior por mes. Los valores utilizados son referencia del siguiente \href{https://www.glassdoor.com.ar/Sueldos/ingeniero-junior-sueldo-SRCH_KO0,16.htm}{Link.}

\section{Ensayos y conclusiones}

Para poder validar el prototipo realizamos las siguientes pruebas:

\begin{itemize}
    \item{\textbf{Pruebas de Software:} en donde se comprobó el funcionamiento de cada componente de los distintos programas.}
    \item{\textbf{Pruebas de conexionado:} medición de tensiones, continuidad, etc.}
    \item{\textbf{Pruebas de gestión:} se comprobó la seguridad de acceso, la monitorización de los distintos paneles de control, etc.}
    \item{\textbf{Pruebas de funcionamiento:} aplicando una serie de configuraciones por defecto, se testeó el PID y las acciones correctivas del controlador, asegurándose de que el sistema no sea inestable y corrija con precisión los desbalances producidos por cambios en el ofset o setpoint.}
\end{itemize}

Todas las pruebas fueron pasadas con éxito, pero fue necesaria una simulación que si bien es bastante fiel, la misma presenta diferencias de comportamiento respecto al sistema real.

El video del protipo se encuentra en el siguiente \href{https://drive.google.com/file/d/1-0-tkOWRzmBlvVKaE4glTuZy0YFnLR4_/view?usp=sharing}{Link.}